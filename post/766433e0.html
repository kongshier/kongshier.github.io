<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>SSM框架 | 十二-Y</title><meta name="author" content="十二-Y"><meta name="copyright" content="十二-Y"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Spring、SpringMVC、MyBatis的介绍"><link rel="shortcut icon" href="http://picgo.kongshier.top/2767/bluecat.png"><link rel="canonical" href="https://kongshier.github.io/post/766433e0"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":670,"position":"top","messagePrev":"该文章创建于","messageNext":"天之前,请以最新的文章为准."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":100,"languages":{"author":"作者: 十二-Y","link":"链接: ","source":"来源: 十二-Y","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SSM框架',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-09 21:25:51'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/allstyle.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/aplayer_music.css"  media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-clock/lib/clock.min.css" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="http://picgo.kongshier.top/2767/QQ图片20220401082949.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-message"></i><span> 我的文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-link"></i><span> 我的链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/stars/"><i class="fa-fw fas fa-star"></i><span> 我的收藏</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-user"></i><span> 关于我</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于作者</span></a></li><li><a class="site-page child" href="/lmessenger/"><i class="fa-fw fa-solid fa-comment-dots"></i><span> 留言板</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('http://picgo.kongshier.top/2767/28.jpeg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">十二-Y</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div id="he-plugin-simple"></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-message"></i><span> 我的文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-link"></i><span> 我的链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fa-solid fa-user-group"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/stars/"><i class="fa-fw fas fa-star"></i><span> 我的收藏</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-user"></i><span> 关于我</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于作者</span></a></li><li><a class="site-page child" href="/lmessenger/"><i class="fa-fw fa-solid fa-comment-dots"></i><span> 留言板</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SSM框架</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-22T07:40:00.000Z" title="发表于 2022-08-22 15:40:00">2022-08-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-09T13:25:51.753Z" title="更新于 2023-04-09 21:25:51">2023-04-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/SSM/">SSM</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">18.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>78分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="SSM框架"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-Spring"><a href="#1-Spring" class="headerlink" title="1.Spring"></a>1.Spring</h1><h3 id="Spring优势："><a href="#Spring优势：" class="headerlink" title="Spring优势："></a>Spring优势：</h3><ol>
<li>方便解耦，简化开发</li>
<li>AOP编程的支持</li>
<li>生命式事物的支持</li>
<li>方便程序的测试</li>
<li>方便集成各种优秀的框架</li>
<li>降低 JavaEE API 的使用难度</li>
<li>Java源码是经典学习范例</li>
</ol>
<h2 id="Spring体系结构"><a href="#Spring体系结构" class="headerlink" title="Spring体系结构"></a>Spring体系结构</h2><p><img src="http://picgo.kongshier.top/2767/image-20220301192712251.png" alt="image-20220301192712251"></p>
<h3 id="SSM框架"><a href="#SSM框架" class="headerlink" title="SSM框架"></a>SSM框架</h3><h4 id="1-在JavaWeb中的三层架构"><a href="#1-在JavaWeb中的三层架构" class="headerlink" title="1.在JavaWeb中的三层架构"></a>1.在JavaWeb中的三层架构</h4><ol>
<li>变现层（Web层）：主要的框架SpringMVC 、Struts2 、展示的页面（JSP页面）。</li>
<li>业务层（Service层）：实现业务逻辑。</li>
<li>持久层（Dao层）：主要的框架：Hibernate、MyBatis。负责与数据库的交互，封装数据库的访问细节。<ul>
<li>从数据库表中读取加载数据并实例化领域对象（Domian Objecty ）就是从数据库中&#x3D;&#x3D;读取&#x3D;&#x3D;数据</li>
<li>或者将领域对象实例化到数据库中，就是将数据&#x3D;&#x3D;写入&#x3D;&#x3D;数据库中。</li>
</ul>
</li>
</ol>
<h4 id="2-在SSM中的三层架构"><a href="#2-在SSM中的三层架构" class="headerlink" title="2.在SSM中的三层架构"></a>2.在SSM中的三层架构</h4><p>轻量级开发中，常对Web分为以下几层：</p>
<ol>
<li>POJO层：&#x3D;&#x3D;由一组POJO组成，主要对系统各种对象的抽象表达&#x3D;&#x3D;，也就是存放实体类比如 User 实体</li>
<li>Dao层（mapper层）：&#x3D;&#x3D;负责数据库的访问，增、删、改、查等操作&#x3D;&#x3D;。MyBatis框架中被定义为Mapper层</li>
<li>Service层：&#x3D;&#x3D;由业务逻辑对象组成&#x3D;&#x3D;，是不同系统的业务逻辑的具体实现。</li>
<li>Controller层：&#x3D;&#x3D;由控制器组成&#x3D;&#x3D;，对来自浏览器的用户进行拦截，并调用Service层的响应的业务逻辑组件处理用户请求，并转发结果返回到View层。</li>
<li>View层：&#x3D;&#x3D;由Jsp页面，PDF文档等组件组成&#x3D;&#x3D; ，用于显示系统对用户请求的处理结果</li>
</ol>
<h4 id="3-在SSM中包的作用："><a href="#3-在SSM中包的作用：" class="headerlink" title="3.在SSM中包的作用："></a>3.在SSM中包的作用：</h4><table>
<thead>
<tr>
<th>包名</th>
<th>名称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>dao</td>
<td>数据访问层（创建接口）</td>
<td>封装对数据库的操作，与数据库有关的操作都存放在这个包下面</td>
</tr>
<tr>
<td>Entity</td>
<td>实例类</td>
<td>一般与数据库的表相对应，封装dao层取出来的数据为一个对象</td>
</tr>
<tr>
<td>Service</td>
<td>业务逻辑（接口）</td>
<td>写业务逻辑的</td>
</tr>
<tr>
<td>Service-impl</td>
<td>业务逻辑的实现</td>
<td>实现业务的接口，事务控制一般都写在这里</td>
</tr>
<tr>
<td>Controller</td>
<td>MVC控制器</td>
<td>SpringMVC就是在这里发挥作用的</td>
</tr>
<tr>
<td>Mapper</td>
<td>数据库具体操作</td>
<td>包含xxxMapper.xml 和xxxMapper.java二者互相对应</td>
</tr>
</tbody></table>
<p><strong>说明：</strong></p>
<ul>
<li>dao：&#x3D;&#x3D;里面可以是数据库的操作，也可以是文件读写操作，甚至是Redis缓存操作。&#x3D;&#x3D;（数据持久层）。由于Mybatis可以直接在配置文件中实现接口的每个方法，所以不需要 dao-imple</li>
<li>dto ：&#x3D;&#x3D;用于service与web层之间的传输&#x3D;&#x3D;。一般我们使用dto类来继承entity实体类，在dto类里面方一些业务字段，并提供get、set方法。当我们在业务逻辑层或者交互层用到一些数据库中不存在的字段时，我们就需要在DTO类里面放这些字段，这些字段的一样就相当于一些经处理过的数据库字段，实质意义就是方便数据交互，提高效率。</li>
<li>Entity：&#x3D;&#x3D;一般与数据库表相对应，封装dao层取出来的数据做为一个对象&#x3D;&#x3D;，也就是pojo，一般只在dao与service层之间传输</li>
</ul>
<p><strong>other 包：</strong></p>
<ul>
<li>Exception：自定义异常</li>
<li>Utils：即utility，工具辅助层，一组通用的代码集合（比如处理多语言功能，网站非法信息过滤等等功能的代码集）</li>
<li>resource：存放&#x3D;&#x3D;后端&#x3D;&#x3D;配置文件</li>
</ul>
<h4 id="4-在SSM中的配置文件"><a href="#4-在SSM中的配置文件" class="headerlink" title="4.在SSM中的配置文件"></a>4.在SSM中的配置文件</h4><table>
<thead>
<tr>
<th>文件名</th>
<th>文件名解释</th>
<th>内容（说明）</th>
</tr>
</thead>
<tbody><tr>
<td>spring-dao.xml</td>
<td>spring数据链接配置</td>
<td>配置数据连接池、sqlSessionFactory对象、扫描dao接口</td>
</tr>
<tr>
<td>spring-service.xml</td>
<td>spring服务配置</td>
<td>扫描service包下注解、配置事务管理器、基于注解的事务</td>
</tr>
<tr>
<td>spring-mvc.xml</td>
<td>Spring MVC配置</td>
<td>开启框架注解模式、处理静态资源、配置jsp、扫描controller</td>
</tr>
<tr>
<td>jdbc.proties</td>
<td>数据库链接参数</td>
<td>配置jdbc、数据库URL、用户名、密码等</td>
</tr>
<tr>
<td>mybatis-config.xml</td>
<td>myBatis配置文件</td>
<td>开启自增主键、使用列别名、驼峰转换</td>
</tr>
<tr>
<td>log4j.properties</td>
<td>web日志输出参数</td>
<td>web输出参数</td>
</tr>
<tr>
<td>application.xml</td>
<td>Spring与Mybatis整合配置</td>
<td>数据库连接池、sqlSeesionFactory对象、扫描dao接口</td>
</tr>
<tr>
<td>webapp</td>
<td>前端与配置文件</td>
<td></td>
</tr>
<tr>
<td>web.xml</td>
<td></td>
<td>配置Spring需要加载的配置文件、启用disapatcher转发处理所有的请求、指定编码格式</td>
</tr>
</tbody></table>
<h4 id="5-SSM中包之间的关系"><a href="#5-SSM中包之间的关系" class="headerlink" title="5.SSM中包之间的关系"></a>5.SSM中包之间的关系</h4><ul>
<li>controller包是SpringMVC的主要文件，对来自浏览器的各种请求进行转发和处理。在controller中内置各种Service包中的对象，当接收到新的请求时，就会解析URL，根据注解调用相应的服务来完成请求。</li>
<li>entity包常与数据库表 一 一 对应，dao包中定义了数据库的基本操作，并在mapper包中的xml配置文件中完成数据操作的具体实现（增、删、改、查）。MyBatis可以实现到与  .xml 的自动匹配，这时就要把 xxxMapper.xml 和 xxxMapper.java 放在同一个包下。</li>
<li>Service包中定义了各种服务接口，通过Service-impl包中对接口进行实现，在实现接口的时候会 内置一个dao包中的对象（web服务的实现肯定会设计数据访问的，而数据访问被抽象称dao包中的对象，所以服务的实现必须借助dao包）借助到中的对象所实现的各种数据访问处理对象来实现具体的服务。</li>
</ul>
<h4 id="6-SSM框架中各框架的作用"><a href="#6-SSM框架中各框架的作用" class="headerlink" title="6.SSM框架中各框架的作用"></a>6.SSM框架中各框架的作用</h4><ul>
<li>MyBatis：持久层框架，负责数据库的访问</li>
<li>Spring MVC：表现层框架，把模型、视图、控制器分离，组合成一个灵活的系统</li>
<li>Spring：整合项目的所有框架，管理各种Java Bean（mapper、service、controller）事务控制。</li>
</ul>
<h2 id="Spring程序开发步骤"><a href="#Spring程序开发步骤" class="headerlink" title="Spring程序开发步骤"></a>Spring程序开发步骤</h2><ol>
<li><p>导入 Spring 开发的基本包坐标</p>
</li>
<li><p>编写 Dao 接口和实现类 </p>
</li>
<li><p>创建 Spring 核心配置文件 xml</p>
</li>
<li><p>在 Spring 配置文件中配置 UserDaoImpl </p>
</li>
<li><p>使用 Spring 的 API 获得 Bean 实例</p>
</li>
<li><p>导入坐标</p>
</li>
<li><p>编辑Bean</p>
</li>
<li><p>创建applicationContext.xml </p>
</li>
<li><p>Spring配置文件</p>
</li>
<li><p>获得Bean实例</p>
</li>
</ol>
<h2 id="1-1Spring配置文件"><a href="#1-1Spring配置文件" class="headerlink" title="1.1Spring配置文件"></a>1.1Spring配置文件</h2><h3 id="Bean标签范围配置"><a href="#Bean标签范围配置" class="headerlink" title="Bean标签范围配置"></a>Bean标签范围配置</h3><ol>
<li>当scope &#x3D; singleton时 Bean的实例化个数：1个</li>
</ol>
<p>​		Bean的实例化时机：当Spring核心文件被加载时，实例化配置的Bean实例 </p>
<ol start="2">
<li>当scope &#x3D; prototype时 Bean的实例化个数：多个</li>
</ol>
<p>​		Bean的实例化时机：当调用getBean()方法时实例化Bean </p>
<h3 id="Bean生命周期配置"><a href="#Bean生命周期配置" class="headerlink" title="Bean生命周期配置"></a>Bean生命周期配置</h3><ul>
<li>init-method ： 初始化方法</li>
<li>destory-method ：销毁方法</li>
</ul>
<h3 id="Bean实例化三种方法"><a href="#Bean实例化三种方法" class="headerlink" title="Bean实例化三种方法"></a>Bean实例化三种方法</h3><ol>
<li>无参<strong>构造</strong>方法实例化   <strong>重点</strong></li>
<li>工厂<strong>静态</strong>方法实例化</li>
<li>工厂<strong>实例</strong>方法实例化</li>
</ol>
<h3 id="Bean依赖注入概念"><a href="#Bean依赖注入概念" class="headerlink" title="Bean依赖注入概念"></a>Bean依赖注入概念</h3><p>依赖注入：是Spring 框架核心Ioc的具体实现</p>
<h3 id="Bean依赖输入方式"><a href="#Bean依赖输入方式" class="headerlink" title="Bean依赖输入方式"></a>Bean依赖输入方式</h3><ol>
<li><p>构造方法 (有参和无参)</p>
<p>配置文件</p>
<p><img src="http://picgo.kongshier.top/2767/image-20220302215722762.png" alt="image-20220302215722762"></p>
</li>
<li><p>set方法</p>
<p>引入命名空间</p>
<p><img src="http://picgo.kongshier.top/2767/image-20220302215038130.png" alt="image-20220302215038130"></p>
<p>配置文件的设置 （简便方式）</p>
<p><img src="http://picgo.kongshier.top/2767/image-20220302215004925.png" alt="image-20220302215004925"></p>
</li>
</ol>
<h3 id="Bean依赖输入的数据类型"><a href="#Bean依赖输入的数据类型" class="headerlink" title="Bean依赖输入的数据类型"></a>Bean依赖输入的数据类型</h3><ul>
<li>普通数据类型</li>
<li>引用数据类型</li>
<li>集合数据类型</li>
</ul>
<h3 id="引入其他配置文件（分模块开发）"><a href="#引入其他配置文件（分模块开发）" class="headerlink" title="引入其他配置文件（分模块开发）"></a>引入其他配置文件（分模块开发）</h3><blockquote>
<p>实际开发中配置文件比较多，导致Spring配置繁杂，不方便读取，so将其进行部分配置拆解到其他配置文件中 通过 import标签加载，根据业务进行拆解配置文件</p>
<p><img src="http://picgo.kongshier.top/2767/image-20220302223150967.png" alt="image-20220302223150967"></p>
</blockquote>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p><img src="http://picgo.kongshier.top/2767/image-20220302224059142.png" alt="image-20220302224059142"></p>
<h2 id="1-2-Spring的API"><a href="#1-2-Spring的API" class="headerlink" title="1.2 Spring的API"></a>1.2 Spring的API</h2><h3 id="1-2-1ApplicationContext的继承体系"><a href="#1-2-1ApplicationContext的继承体系" class="headerlink" title="1.2.1ApplicationContext的继承体系"></a>1.2.1ApplicationContext的继承体系</h3><p><strong>接口</strong></p>
<p><img src="http://picgo.kongshier.top/2767/image-20220302224454401.png" alt="image-20220302224454401"></p>
<h3 id="1-2-2-ApplicationContext的实现类"><a href="#1-2-2-ApplicationContext的实现类" class="headerlink" title="1.2.2 ApplicationContext的实现类"></a>1.2.2 ApplicationContext的实现类</h3><p><img src="http://picgo.kongshier.top/2767/image-20220302225126952.png" alt="image-20220302225126952"></p>
<h3 id="1-2-3-getBean-方法使用"><a href="#1-2-3-getBean-方法使用" class="headerlink" title="1.2.3 getBean()方法使用"></a>1.2.3 getBean()方法使用</h3><p>通过id获取</p>
<ul>
<li>使用场景：某一类型的bean存在多个</li>
</ul>
<p>通过类型获取</p>
<ul>
<li>使用场景：某一个类型的bean<strong>只存</strong>在一个</li>
</ul>
<h2 id="2-Spring配置数据源"><a href="#2-Spring配置数据源" class="headerlink" title="2.Spring配置数据源"></a>2.Spring配置数据源</h2><h3 id="2-数据源-连接池-的作用"><a href="#2-数据源-连接池-的作用" class="headerlink" title="2.数据源(连接池)的作用"></a>2.数据源(连接池)的作用</h3><ul>
<li>提高程序性能如何实现的</li>
<li>实例化数据源，初始化部分链接资源</li>
<li>使用连接资源时从数据源中获取</li>
<li>使用完连接资源后归还数据源</li>
</ul>
<p><strong>常见的数据源</strong> ： DBCP , C2P0 , BoneCP 、Druid等</p>
<blockquote>
<p>底层&#x3D;不一样，API的修改</p>
</blockquote>
<h4 id="2-1数据源开发步骤"><a href="#2-1数据源开发步骤" class="headerlink" title="2.1数据源开发步骤"></a>2.1数据源开发步骤</h4><p><strong>里面的数据账号密码必须的本机的账号和密码</strong></p>
<ol>
<li>导入数据源的坐标和数据库的驱动坐标</li>
<li>创建数据源对象</li>
<li>设置数据源基本连接数据</li>
<li>使用数据源获取连接资源、归还连接数据</li>
</ol>
<p>让容器产生getBean</p>
<h3 id="2-2Spring配置数据源"><a href="#2-2Spring配置数据源" class="headerlink" title="2.2Spring配置数据源"></a>2.2Spring配置数据源</h3><blockquote>
<ul>
<li>将DataSource的创建权由Spring容器完成</li>
</ul>
</blockquote>
<h2 id="3-Spring注解开发"><a href="#3-Spring注解开发" class="headerlink" title="3.Spring注解开发"></a>3.Spring注解开发</h2><blockquote>
<p>注解配置提高开发效率</p>
</blockquote>
<p><strong>Spring原始注解主要是代替<Bean>的配置</strong></p>
<ul>
<li>使用注解进行开发是，需要在xml文件中配置组件扫描：是之u顶哪个包及其子包下的Bean需要进行扫描以便识别使用注解配置的类、字段、方法</li>
</ul>
<h3 id="原始注解"><a href="#原始注解" class="headerlink" title="原始注解"></a>原始注解</h3><p><img src="http://picgo.kongshier.top/2767/image-20220304154054834.png" alt="image-20220304154054834"></p>
<h3 id="Spring新注解"><a href="#Spring新注解" class="headerlink" title="Spring新注解"></a>Spring新注解</h3><p><img src="http://picgo.kongshier.top/2767/image-20220304183652282.png" alt="image-20220304183652282"></p>
<h2 id="4-Spring整合Junit"><a href="#4-Spring整合Junit" class="headerlink" title="4.Spring整合Junit"></a>4.Spring整合Junit</h2><ul>
<li>SpringJunit负责创建容器，配置文件的名称要知道</li>
<li>直接将测试的Bean在测试类注入</li>
</ul>
<p><strong>步骤</strong></p>
<ol>
<li>导入spring集成Junit的坐标</li>
<li>使用@Runwith注解替换原来的运行期</li>
<li>使用@contextConfiguration指定配置文件或配置类</li>
<li>使用@Autowired注入需要测试的对象</li>
<li>创建测试方法进行测试</li>
</ol>
<h3 id="Spring与Web环境集成"><a href="#Spring与Web环境集成" class="headerlink" title="Spring与Web环境集成"></a>Spring与Web环境集成</h3><p>ApplicationContext应用获取上下文</p>
<p><strong>在Web项目中</strong></p>
<p>使用ServletContextListener监听Web应用的启动，Web应用启动时，就加载Spring的配置文件，创建应用上下文对象ApplicationContext，</p>
<p>在将其存储到最大的域servletContext域中，则可以在任意位置从域中获得应用上下文ApplicationContext对象。</p>
<h3 id="Spring提供获取上下文的工具"><a href="#Spring提供获取上下文的工具" class="headerlink" title="Spring提供获取上下文的工具"></a>Spring提供获取上下文的工具</h3><ol>
<li>在web.xml中配置ContextLoaderListner监听器（导入Spring-web坐标）</li>
<li>使用WebApplicationContextUtils获得应用上下文对象ApplicationContext</li>
</ol>
<h1 id="2-SpringMVC"><a href="#2-SpringMVC" class="headerlink" title="2.SpringMVC"></a>2.SpringMVC</h1><p><strong>概述：</strong>  基于java实现的MVC设计模型的请求驱动请谅解Web框架  ， <strong>通过一套注解</strong> 使用一个简单的Java类成为请求的控制器，无需实现任何接口，还具有RESTful编程风格请求。</p>
<p><strong>访问控制图：</strong></p>
<p><img src="http://picgo.kongshier.top/2767/image-20220307211351133.png" alt="image-20220307211351133"></p>
<h2 id="1-1MVC开发步骤-√"><a href="#1-1MVC开发步骤-√" class="headerlink" title="1.1MVC开发步骤  √"></a>1.1MVC开发步骤  √</h2><ol>
<li>导入SpringMVC包      																	<strong>导入SpringMVC相关坐标</strong></li>
<li>配置Servlet                                                                                      <strong>配置SpringMVC核心控制器DispathcerServlet（前端控制器）</strong></li>
<li>编写Controller                                                                                <strong>创建Controller类和视图页面</strong></li>
<li>将Controller使用注解配置到Spring容器中(@Controller)          <strong>使用注解配置Controller类中业务方法的映射地址</strong></li>
<li>配置spring-mvc.xml文件(配置组件扫描)                                      <strong>配置SpringMVC核心文件spring-mvc.xml</strong></li>
<li>客户端发起请求测试</li>
</ol>
<p><img src="http://picgo.kongshier.top/2767/image-20220307214822123.png" alt="image-20220307214822123"></p>
<h3 id="访问过程"><a href="#访问过程" class="headerlink" title="访问过程"></a>访问过程</h3><p><img src="http://picgo.kongshier.top/2767/image-20220307215747054.png" alt="image-20220307215747054"></p>
<h3 id="执行流程"><a href="#执行流程" class="headerlink" title="执行流程"></a>执行流程</h3><p><img src="http://picgo.kongshier.top/2767/image-20220307220623806.png" alt="image-20220307220623806"></p>
<h2 id="2-SpringMVC注解解析"><a href="#2-SpringMVC注解解析" class="headerlink" title="2.SpringMVC注解解析"></a>2.SpringMVC注解解析</h2><p>@RequestMapping  ：用于建立请求URL与处理请求方法之间的对应关系</p>
<ul>
<li>类上           </li>
<li>方法上        用于区分不同的方法请求</li>
</ul>
<p><strong>属性</strong> ：</p>
<ul>
<li><p>value： 用于指定请求的URL </p>
</li>
<li><p>method：指定请求的方式  GET&#x2F;POST</p>
</li>
<li><p>params : 用于指定限制请求参数的条件  只能支持简单的表达式</p>
<ul>
<li>&#96;&#96;&#96;Java<br>params &#x3D; {“username”}   &#x2F;&#x2F; 必须携带有username 参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 3.SpringMVC组件解析</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 3.1.视图解析器</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### SpringMVC的相关组件</span><br><span class="line"></span><br><span class="line">- 前端控制器: DispatcherServlet    **调用其他工作组件**</span><br><span class="line">- 处理器映射器:HandlerMapping   </span><br><span class="line">- 处理器适配器:HandlerAdapter  </span><br><span class="line">- 处理器:Handler     </span><br><span class="line">- 视图解析器:View Resolver      渲染试图</span><br><span class="line">- 视图:View </span><br><span class="line"></span><br><span class="line">### SpringMVC注解和配置</span><br><span class="line"></span><br><span class="line">- @RequestMapping ：请求映射注解</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 4.SpringMVC的数据响应</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 4.1响应方式</span><br><span class="line"></span><br><span class="line">1. 页面跳转</span><br><span class="line">   - 直接返回字符串形式</span><br><span class="line">   - 通过ModelAndView 对象返回</span><br><span class="line">2. 回写数据</span><br><span class="line">   - 直接返回字符串</span><br><span class="line">   - 返回对象或集合</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1. 直接返回字符串形式</span><br><span class="line"></span><br><span class="line">   ![image-20220308103532717](http://picgo.kongshier.top/2767/image-20220308103532717.png)</span><br><span class="line"></span><br><span class="line">2. 返回ModelandView</span><br><span class="line"></span><br><span class="line">3. 直接返回字符串(回写数据)</span><br><span class="line"></span><br><span class="line">   - 通过SpringMVC框架注入的response对象，使用response.getWriter().print(“hello world”) 回写数据，不需要进行页面跳转</span><br><span class="line"></span><br><span class="line">   -  ✔若是直接返回字符串，需要通过**@ResponseBody注解告知SpringMVC框架**，方法返回的字符串不是跳转，而是直接在http响应体中返回</span><br><span class="line"></span><br><span class="line">4. 返回对象和集合</span><br><span class="line"></span><br><span class="line">   - 使用mvc注解取代@ResponseBody      在xml文件中配置  **&lt;mvc:annotation-driven    xxxxx /&gt;**   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 5. Spring 获得请求参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 5.1获得请求参数</span><br><span class="line"></span><br><span class="line">&gt; 格式：name = value &amp; name= value  … …</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SpringMVC可以接受以下参数类型</span><br><span class="line"></span><br><span class="line">- 基本类型参数</span><br><span class="line">- 简单POJO类型参数</span><br><span class="line">- 数组类型参数</span><br><span class="line">- 集合类型参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5.1.1获得基本类型参数</span><br><span class="line"></span><br><span class="line">- Controller中的**业务方法的参数名称要与请求参数**的name一致，参数值会自动映射匹配。</span><br><span class="line"></span><br><span class="line">  - 在业务方法中的参数就是想要得到的参数内容 	例如下面的代码</span><br><span class="line"></span><br><span class="line">    ~~~java</span><br><span class="line">    	@RequestMapping(value=&quot;/quick11&quot;)</span><br><span class="line">        @ResponseBody  // 不进行页面跳转  在控制台得到输出的内容</span><br><span class="line">        public void save11(String username,int age) throws IOException &#123;</span><br><span class="line">            System.out.println(username);</span><br><span class="line">            System.out.println(age);</span><br><span class="line">        &#125;</span><br><span class="line">    ~~~</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5.1.2获得POJO类型参数</span><br><span class="line"></span><br><span class="line">- Controller中的业务方法的**POJO参数的属性名**与请求参数的name一致，参数值会自动映射匹配。</span><br><span class="line"></span><br><span class="line">  - 先定义一个User类 有String username,int age 两个私有变量 </span><br><span class="line"></span><br><span class="line">    ```java</span><br><span class="line">    @RequestMapping(value=&quot;/quick12&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public void save12(User user) throws IOException &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="5-1-3获得数据类型参数"><a href="#5-1-3获得数据类型参数" class="headerlink" title="5.1.3获得数据类型参数"></a>5.1.3获得数据类型参数</h4><ul>
<li><p>Controller中的业务方法的<strong>数组名称</strong>与请求参数的name一致，参数值会自动映射匹配。</p>
<ul>
<li><p>访问的形式localhost：8080&#x2F;quick13?username &#x3D; zhangsan &amp;age &#x3D; 13</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/quick13&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save13</span><span class="params">(String[] strs)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(Arrays.asList(strs));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="5-1-4获得集合类型参数"><a href="#5-1-4获得集合类型参数" class="headerlink" title="5.1.4获得集合类型参数"></a>5.1.4获得集合类型参数</h4><ul>
<li><p>1 获取集合参数时，要将集合参数包装到一个POJO对象中 ，称为View对象</p>
<ul>
<li>创建一个VO类型包装好集合  private List<User> userlist</li>
</ul>
</li>
<li><p>2 当使用<strong>ajax提交时</strong>，可以指定<strong>contentType为json形式</strong>，那么在方法参数位置使用**@RequestBody可<strong>以直接接收集合数据而</strong>无需使用POJO进行包装**。</p>
<ul>
<li><p>在xml文件中要**设置开放资源(一般是静态资源)**访问：&lt;mvc:resources mapping&#x3D;”&#x2F;js&#x2F;** “ location&#x3D;”&#x2F;js&#x2F;“&#x2F;&gt;  找到存放jquery文件的位置  <strong>若是不设置会在浏览器的开发者模式下看到报错</strong></p>
</li>
<li><p>在创建一个ajax.jsp文件 </p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--    引入jQuery--%&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/js/jquery-3.3.1.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="type">var</span> <span class="variable">userList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line">        userList.push(&#123;username:<span class="string">&quot;zhangsan&quot;</span>,age:<span class="number">18</span>&#125;);</span><br><span class="line">        userList.push(&#123;username:<span class="string">&quot;lisi&quot;</span>,age:<span class="number">28</span>&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// jQuery语法</span></span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            type:<span class="string">&quot;POST&quot;</span>,</span><br><span class="line">            url:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/quick15&quot;</span>,</span><br><span class="line">            data:JSON.stringify(userList),</span><br><span class="line">            contentType:<span class="string">&quot;application/json;charset=utf-8&quot;</span></span><br><span class="line">        &#125;);     </span><br><span class="line">     &lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在控制台的访问形式：在方法参数中添加@RequestBody   存放数据在指定的集合中  List<User> userList</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/quick15&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save15</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;User&gt; userList)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(userList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>开启静态资源的方式</p>
<ul>
<li><p>1.相对具体文件来进行比较麻烦每一个静态的文件都要设置一次 资源访问</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开放资源的访问--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mapping 是服务端访问的地址 location的具体的地址--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/js/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/js/&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/img/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/img/&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>2.简单粗暴形式  就能把所有的静态资源权限都打开都能访问到</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="5-2请求数据乱码问题"><a href="#5-2请求数据乱码问题" class="headerlink" title="5.2请求数据乱码问题"></a>5.2请求数据乱码问题</h3><ul>
<li><p>设置一个过滤器进行过滤代码</p>
<ul>
<li><p>配置全局的filter</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置全局过滤的filter--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 指定的值编码--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="5-3参数绑定注解-requestParam"><a href="#5-3参数绑定注解-requestParam" class="headerlink" title="5.3参数绑定注解@requestParam"></a>5.3参数绑定注解@requestParam</h3><ul>
<li>当请求的参数名称与Controller的业务方法参数名称<strong>不一致时</strong>，就需要通过@RequestParam注解显示的绑定。<ul>
<li>@requestParam的参数 ：</li>
<li><strong>value：</strong>请求参数的名称</li>
<li><strong>required：</strong>指定请求的参数是否必须包括，<strong>默认是TRUE 提交时若是没有此参数会报错</strong> </li>
<li><strong>defaultValue：</strong>没有指定请求参数时，则使用默认的值赋值</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/quick16&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">// required  = false 没有name 参数 也可以进行  ，若是true 没有name 则会报错</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save16</span><span class="params">(<span class="meta">@RequestParam(value=&quot;name&quot;,required = false,defaultValue = &quot;itcast&quot;)</span> String username)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(username);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-4获得Restful风格的参数"><a href="#5-4获得Restful风格的参数" class="headerlink" title="5.4获得Restful风格的参数"></a>5.4获得Restful风格的参数</h3><p><strong>Restful</strong>是一种软件<strong>架构风格、设计风格</strong>，而不是标准，只是提供了一组设计原则和约束条件。主要用于客户端和服务器交互类的软件，基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存机制等。</p>
<ul>
<li><p>Restful风格的请求方式：“url + 请求方式”  有以下四种</p>
<ol>
<li>GET：用于获取资源</li>
<li>POST：用于新建资源</li>
<li>PUT：用于更新资源</li>
<li>DELETE：用于删除资源</li>
</ol>
<p><img src="http://picgo.kongshier.top/2767/image-20220309163756460.png" alt="image-20220309163756460"></p>
</li>
</ul>
<p>上述url地址&#x2F;user&#x2F;1中的1就是要获得的请求参数，在SpringMVC中可以使用占位符进行参数绑定。地址&#x2F;user&#x2F;1可以写成&#x2F;user&#x2F;[id)，占位符lid)对应的就是1的值。在业务方法中我们可以使用**@PathVariable注解进行占位符的匹配获取工作**。</p>
<p><img src="http://picgo.kongshier.top/2767/image-20220309164104285.png" alt="image-20220309164104285"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/quick17/&#123;name&#125;&quot;,method = POST)</span> <span class="comment">//method获取请求方式</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save17</span><span class="params">(<span class="meta">@PathVariable(value=&quot;name&quot;)</span> String username)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(username);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-5自定义类型转换器"><a href="#5-5自定义类型转换器" class="headerlink" title="5.5自定义类型转换器"></a>5.5自定义类型转换器</h3><ul>
<li>SpringMVC默认已经提供了一些<strong>常用的类型转换器</strong>，例如客户端提交的<strong>字符串转换成int型</strong>进行参数设置。</li>
<li>但是不是所有的数据类型都提供了转换器，没有提供的就需要自定义转换器，例如:日期类型的数据就需要自定义转换器。</li>
</ul>
<p>自定义类型转换器的步骤：</p>
<ol>
<li>定义转换器类实现Converter接口</li>
<li>在配置文件中声明转换器</li>
<li>在<annotation-driven>中引用转挨器</li>
</ol>
<p>第一步：定义转换器类实现Converter接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.core.convert.converter.Converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DateConverter</span> <span class="keyword">implements</span> <span class="title class_">Converter</span>&lt;String, Date&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">convert</span><span class="params">(String dateStr)</span> &#123;</span><br><span class="line">        <span class="comment">//将日期字符串转换成日期对象 返回</span></span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">format</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            date = format.parse(dateStr);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第二步：在配置文件中声明转换器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--声明转换器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;conversionService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;converters&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.converter.DateConverter&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第三步：在<annotation-driven>中引用转挨器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!--mvc的注解驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">&quot;conversionService&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/quick18&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save18</span><span class="params">(Date date)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(date);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-6获得Servlet相关API"><a href="#5-6获得Servlet相关API" class="headerlink" title="5.6获得Servlet相关API"></a>5.6获得Servlet相关API</h3><p>SpringMVC支持使用原始ServletAPl对象作为<strong>控制器方法的参数进行注入</strong>，常用的对象如下:</p>
<ul>
<li>HttpServletRequest</li>
<li>HttpServletResponse</li>
<li>HttpSession</li>
</ul>
<p>在方法中注释这些参数(形参) </p>
<p> 例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/quick19&quot;)</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save19</span><span class="params">(HttpServletRequest request, HttpServletResponse response, HttpSession session)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       System.out.println(request);</span><br><span class="line">       System.out.println(response);</span><br><span class="line">       System.out.println(session);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-7获得请求头"><a href="#5-7获得请求头" class="headerlink" title="5.7获得请求头"></a>5.7获得请求头</h3><ol>
<li><p>@RequestHeader注解</p>
<ul>
<li><p>属性：</p>
</li>
<li><p>value:请求头的名称</p>
</li>
<li><p>required：是否必须携带此请求头  true 的时候，当不是这个头会报错，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/quick20&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save20</span><span class="params">(<span class="meta">@RequestHeader(value = &quot;User-Agent&quot;,required = false)</span> String user_agent)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(user_agent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>@CookieValue</p>
<p>直接从cookie的名称获得cookie的值</p>
<ul>
<li><p>属性</p>
</li>
<li><p>value:指定cookie的名称</p>
</li>
<li><p>required：是否必须携带此cookie</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/quick21&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save21</span><span class="params">(<span class="meta">@CookieValue(value = &quot;JSESSIONID&quot;)</span> String jsessionId)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(jsessionId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="5-8文件上传"><a href="#5-8文件上传" class="headerlink" title="5.8文件上传"></a>5.8文件上传</h3><p>文件上传客户端的三要素</p>
<ol>
<li>表单项type&#x3D;“file”</li>
<li>表单的提交方式是post</li>
<li>表单的enctype属性是多部分表单形式，及enctype&#x3D;“multipart&#x2F;form-data”  多表单形式</li>
</ol>
<p>原理：</p>
<ul>
<li>当form表单修改为多部分表单时,request.getParameter()将失效。</li>
<li>enctype&#x3D; “application&#x2F;x-www-form-urlencoded”时，form表单的正文内容格式是:<strong>key&#x3D;value&amp;key&#x3D;value&amp;key&#x3D;value</strong></li>
<li>当form表单的enctype取值为Mutilpart&#x2F;form-data时，请求正文内容就变成多部分形式</li>
</ul>
<h4 id="5-8-1单文件上传步骤"><a href="#5-8-1单文件上传步骤" class="headerlink" title="5.8.1单文件上传步骤"></a>5.8.1单文件上传步骤</h4><p>upload.jsp文件</p>
<p>代码  里面是两个表单文件</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/quick22&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    名称&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">    文件<span class="number">1</span>&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;uploadFile&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">    文件<span class="number">2</span>&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;uploadFile2&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>



<ol>
<li><p>导入fileupload和io坐标</p>
<ul>
<li><p>代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>配置文件上传解析器</p>
<ul>
<li><p>代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置文件上传解析器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;500000&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>编写文件上传代码</p>
<ul>
<li><p>代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/quick22&quot;)</span></span><br><span class="line">  <span class="meta">@ResponseBody</span>   <span class="comment">//在参数中的上传的文件名字要与表单中设置的value的名字一样</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save22</span><span class="params">(String username, MultipartFile uploadFile,MultipartFile uploadFile2)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">      System.out.println(username);</span><br><span class="line">      <span class="comment">//保存/存储文件</span></span><br><span class="line">      <span class="comment">//1.获得上传文件的名称</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> uploadFile.getOriginalFilename();<span class="comment">//上传文件原始名称</span></span><br><span class="line">      uploadFile.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\upload\\&quot;</span>+originalFilename));<span class="comment">//将文件到转移到 C:\\upload\\或者是转移到某个服务器上</span></span><br><span class="line">      <span class="comment">//这个是另外的文件</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">originalFilename2</span> <span class="operator">=</span> uploadFile2.getOriginalFilename();</span><br><span class="line">      uploadFile2.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\upload\\&quot;</span>+originalFilename2));</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h4 id="5-8-2多文件上传"><a href="#5-8-2多文件上传" class="headerlink" title="5.8.2多文件上传"></a>5.8.2多文件上传</h4><p>表单</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/quick23&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    名称&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">    文件<span class="number">1</span>&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;uploadFile&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">    文件<span class="number">2</span>&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;uploadFile&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>



<p>&#x2F;&#x2F;使用数组上传文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/quick23&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save23</span><span class="params">(String username, MultipartFile[] uploadFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(username);</span><br><span class="line">    <span class="keyword">for</span> (MultipartFile multipartFile : uploadFile) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> multipartFile.getOriginalFilename();</span><br><span class="line">        multipartFile.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\upload\\&quot;</span>+originalFilename));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="3-Spring-jdbcTemplate基本使用"><a href="#3-Spring-jdbcTemplate基本使用" class="headerlink" title="3.Spring jdbcTemplate基本使用"></a>3.Spring jdbcTemplate基本使用</h1><h2 id="3-1jdcbTemplate概述"><a href="#3-1jdcbTemplate概述" class="headerlink" title="3.1jdcbTemplate概述"></a>3.1jdcbTemplate概述</h2><p>它是spring框架中提供的一个<strong>对象</strong>，是<strong>对原始繁琐的JdbcAPI对象的简单封装</strong>。spring框架为我们提供了很多的<strong>操作模板类</strong>。</p>
<ul>
<li>**例如:**操作关系型数据的JdbcTemplate和ltbernateTemplate，操作nosqI数据库的RedisTemplate，操作消息队列的JmsTemplate等等。</li>
</ul>
<h2 id="3-2-jdbcTemplate开发步骤"><a href="#3-2-jdbcTemplate开发步骤" class="headerlink" title="3.2 jdbcTemplate开发步骤"></a>3.2 jdbcTemplate开发步骤</h2><ol>
<li>导入spring-jdbc和spring-tx坐标</li>
<li>创建数据库表和实体</li>
<li>创建JdbcTemplate对象</li>
<li>执行数据库操作</li>
</ol>
<h2 id="3-3Spring产生jdbcTemplate对象"><a href="#3-3Spring产生jdbcTemplate对象" class="headerlink" title="3.3Spring产生jdbcTemplate对象"></a>3.3Spring产生jdbcTemplate对象</h2><p>配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--加载jdbc.properties--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--数据源对象  解耦 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--jdbc模板对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>jdbc.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/test?&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf8</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> PropertyVetoException &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">app</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    <span class="type">JdbcTemplate</span> <span class="variable">jdbcTemplate</span> <span class="operator">=</span> app.getBean(JdbcTemplate.class);</span><br><span class="line">    <span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> jdbcTemplate.update(<span class="string">&quot;insert into account values(?,?)&quot;</span>, <span class="string">&quot;lisi&quot;</span>, <span class="number">5000</span>);</span><br><span class="line">    System.out.println(row);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="3-4-jdbcTemplate的常用操作"><a href="#3-4-jdbcTemplate的常用操作" class="headerlink" title="3.4 jdbcTemplate的常用操作"></a>3.4 jdbcTemplate的常用操作</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcTemplateCRUDTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryCount</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> jdbcTemplate.queryForObject(<span class="string">&quot;select count(*) from account&quot;</span>, Long.class);</span><br><span class="line">        System.out.println(count);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询一个</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryOne</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> jdbcTemplate.queryForObject(<span class="string">&quot;select * from account where name=?&quot;</span>, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Account&gt;(Account.class), <span class="string">&quot;tom&quot;</span>);</span><br><span class="line">        System.out.println(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Account&gt; accountList = jdbcTemplate.query(<span class="string">&quot;select * from account&quot;</span>, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Account&gt;(Account.class));</span><br><span class="line">        System.out.println(accountList);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//更新</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">        jdbcTemplate.update(<span class="string">&quot;update account set money=? where name=?&quot;</span>,<span class="number">10000</span>,<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span>&#123;</span><br><span class="line">        jdbcTemplate.update(<span class="string">&quot;delete from account where name=?&quot;</span>,<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol>
<li><p>导入spring-jdbc和spring-tx坐标</p>
</li>
<li><p>创建数据库表和实体</p>
</li>
<li><p>创建JdbcTemplate对象</p>
<ul>
<li>JdbcTemplate jdbcTemplate &#x3D; new JdbcTemplate () ;</li>
<li>jdbcTemplate.setDatasource (datasource) ;</li>
</ul>
</li>
<li><p>执行数据库操作</p>
<ul>
<li><p>更新操作:</p>
<p>jdbcTemplate.update (sql,params)</p>
</li>
<li><p>查询操作:</p>
<p>jdbcTemplate.query (sql,Mapper,params)</p>
<p>jdbcTemplate.queryForobject ( sql,Mapper,params)</p>
</li>
</ul>
</li>
</ol>
<h1 id="Spring练习"><a href="#Spring练习" class="headerlink" title="Spring练习"></a>Spring练习</h1><h2 id="1-spring练习环境搭建"><a href="#1-spring练习环境搭建" class="headerlink" title="1.spring练习环境搭建"></a>1.spring练习环境搭建</h2><h3 id="1-1步骤"><a href="#1-1步骤" class="headerlink" title="1.1步骤"></a>1.1步骤</h3><ol>
<li>创建工程(Project&amp;Module)</li>
<li>导入静态页面(见资料jsp页面)</li>
<li>导入需要坐标(见资料中的pom.xml)</li>
<li>创建包结构(controller、service、dao、domain、utils)</li>
<li>导入数据库脚本(见资料testsql)</li>
<li>创建POJO类(见资料User.java和Role.java)</li>
<li>创建配置文件(applicationContext.xml、 spring-mvc.xml、jdbc.properties、log4j.properties)</li>
</ol>
<h3 id="2-用户与角色分析"><a href="#2-用户与角色分析" class="headerlink" title="2.用户与角色分析"></a>2.用户与角色分析</h3><p><img src="http://picgo.kongshier.top/2767/image-20220310223115212.png" alt="image-20220310223115212"></p>
<h4 id="2-1角色列表"><a href="#2-1角色列表" class="headerlink" title="2.1角色列表"></a>2.1角色列表</h4><ol>
<li>点击角色管理菜单发送请求到服务器端（修改角色管理菜单的url地址)</li>
<li>创建RoleController和showList()方法</li>
<li>创建RoleService和showList()方法</li>
<li>创建RoleDao和findAll)方法</li>
<li>使用JdbcTemplate完成查询操作</li>
<li>将查询数据存储到Model中转</li>
<li>发到role-list.jsp页面进行展示</li>
</ol>
<h1 id="4-SpringMCV拦截器"><a href="#4-SpringMCV拦截器" class="headerlink" title="4.SpringMCV拦截器"></a>4.SpringMCV拦截器</h1><h2 id="4-1拦截器作用"><a href="#4-1拦截器作用" class="headerlink" title="4.1拦截器作用"></a>4.1拦截器作用</h2><ul>
<li>Spring MVC的<strong>拦截器</strong>类似于Servlet开发中的过滤器Filter，用于对处理器进行<strong>预处理和后处理。</strong></li>
<li>将拦截器按照一定顺序链接称一条链，拦截器链。</li>
</ul>
<h2 id="4-2过滤器和拦截器的区别"><a href="#4-2过滤器和拦截器的区别" class="headerlink" title="4.2过滤器和拦截器的区别"></a>4.2过滤器和拦截器的区别</h2><ol>
<li>过滤器（Filter）<ul>
<li>是servlet规范中的一部分，任何Java Web工程都可以使用</li>
<li>在url-pattern中配置了&#x2F;*之后，可以对所有要访问的资源拦截</li>
</ul>
</li>
<li>拦截器（Interceptor）<ul>
<li>是 SpringMVC框架自己的，只有使用了SpringMVC框架的工程才能用</li>
<li>在&lt;mvc:mapping path&#x3D;“”&#x2F;&gt;中配置了&#x2F;**之后，也可以多所有资源进行拦截，但是可以通过&lt;mvc:exclude-mapping path&#x3D;“”&#x2F;&gt;标签排除不需要拦截的资源</li>
</ul>
</li>
</ol>
<h2 id="4-3拦截器使用步骤"><a href="#4-3拦截器使用步骤" class="headerlink" title="4.3拦截器使用步骤"></a>4.3拦截器使用步骤</h2><ol>
<li><p>创建拦截器类实现Handlerlnterceptor接口</p>
</li>
<li><p>配置拦截器</p>
<p>- </p>
<ul>
<li>&#96;&#96;&#96;xml<!--配置拦截器-->
<a href="mvc:interceptors">mvc:interceptors</a><br><!--配置的文件顺序就是执行pre的顺序--><br><a href="mvc:interceptor">mvc:interceptor</a><br>    <!--对哪些资源执行拦截操作--><br>    &lt;mvc:mapping path&#x3D;”&#x2F;**”&#x2F;&gt;  对所有的<br>    <bean class="com.itheima.interceptor.MyInterceptor2"/>   对应的拦截器的包<br></mvc:interceptor><br><a href="mvc:interceptor">mvc:interceptor</a><br>    <!--对哪些资源执行拦截操作--><br>    &lt;mvc:mapping path&#x3D;”&#x2F;**”&#x2F;&gt;<br>    <bean class="com.itheima.interceptor.MyInterceptor1"/><br></mvc:interceptor><br></mvc:interceptors><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. 测试拦截器的拦截效果</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 4.4拦截器的方法说明</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1. preHandle0   ✔</span><br><span class="line">   - 返回值类型boolean类型的</span><br><span class="line">   - 返回false 后面的intercepor和Controller都不会执行</span><br><span class="line">   - 返回true 则会继续执行下一个interceptor和controller方法</span><br><span class="line">2. postHandle()</span><br><span class="line">   - 在目标方法执行之前进行执行，必须得preHandle方法返回值是true下，但是在DispatcherService进行视图渲染之前被调用，可以在对Controller处理之后的ModelAndView对象进行操作</span><br><span class="line">3. afterCompletion()</span><br><span class="line">   - 该方法会在渲染了对应的视图之后执行，前提也是preHandle的返回值是true</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 5.SpringMVC异常处理机制</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 1.异常处理思路</span><br><span class="line"></span><br><span class="line">1. 预期异常</span><br><span class="line">   - 通过捕获异常获取异常信息</span><br><span class="line">2. 运行时异常RuntimeException</span><br><span class="line">   - 通过规范代码开发、测试等手段减少运行时异常</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">异常抛出的顺序</span><br><span class="line"></span><br><span class="line">![image-20220311192129229](http://picgo.kongshier.top/2767/image-20220311192129229.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 2.异常处理的两种方式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1. 使用SpringMVC提供的简单异常处理器SimpleMappingExceptionResolver</span><br><span class="line"></span><br><span class="line">   - 配置简单异常处理器 ：根据情况进行相应异常与视图的映射配置</span><br><span class="line"></span><br><span class="line">   - ![image-20220311192825201](http://picgo.kongshier.top/2767/image-20220311192825201.png)</span><br><span class="line"></span><br><span class="line">   - ```xml</span><br><span class="line">     &lt;!--配置异常处理器--&gt;</span><br><span class="line">         &lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;&gt;</span><br><span class="line">             &lt;!--&lt;property name=&quot;defaultErrorView&quot; value=&quot;error&quot;/&gt;--&gt;</span><br><span class="line">             &lt;property name=&quot;exceptionMappings&quot;&gt;</span><br><span class="line">                 &lt;map&gt;</span><br><span class="line">                     &lt;!--类型转换异常--&gt;</span><br><span class="line">                     &lt;entry key=&quot;java.lang.ClassCastException&quot; value=&quot;error1&quot;/&gt;</span><br><span class="line">                     &lt;!--自定义异常--&gt;</span><br><span class="line">                     &lt;entry key=&quot;com.itheima.exception.MyException&quot; value=&quot;error2&quot;/&gt;</span><br><span class="line">                 &lt;/map&gt;</span><br><span class="line">             &lt;/property&gt;</span><br><span class="line">         &lt;/bean&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>使用Spring的异常处理接口HandleExceptionResolver自定义异常</p>
<p>步骤</p>
<ol>
<li>创建异常处理器类实现HandlerExceptionResolver</li>
<li>配置异常处理器</li>
<li>编写异常页面</li>
<li>编写页面跳转</li>
</ol>
</li>
</ol>
<h1 id="6-Spring的AOP"><a href="#6-Spring的AOP" class="headerlink" title="6.Spring的AOP"></a>6.Spring的AOP</h1><ul>
<li>AOP为Aspect Oriented Programming的缩写，意思为<strong>面向切面编程</strong>，是通过<strong>预编译方式和运行期动态代理</strong>实现程序功能的统一维护的一种技术。</li>
<li>AOP可以对业务逻辑各个部分进行隔离（解耦合），使各个业务逻辑各部分之间的耦合度降低，提高程序的复用，提高效率。</li>
</ul>
<h2 id="6-1AOP的作用和优势"><a href="#6-1AOP的作用和优势" class="headerlink" title="6.1AOP的作用和优势"></a>6.1AOP的作用和优势</h2><ol>
<li>作用：在程序运行期间，在不修改源码的情况下对方法进行功能增强</li>
<li>优势：减少重复代码，提高开发效率，并且便于维护</li>
</ol>
<p>不用修改方法代码，只要通过修改日志控制方法代码就能控制到目标方法</p>
<p><img src="http://picgo.kongshier.top/2767/image-20220312100440394.png" alt="image-20220312100440394"></p>
<h2 id="6-2AOP的底层实现"><a href="#6-2AOP的底层实现" class="headerlink" title="6.2AOP的底层实现"></a>6.2AOP的底层实现</h2><ul>
<li>通过Spring提供的动态代理技术实现</li>
<li>运行期间Spring通过动态代理技术生成代理对象</li>
</ul>
<h2 id="6-3AOP动态代理技术"><a href="#6-3AOP动态代理技术" class="headerlink" title="6.3AOP动态代理技术"></a>6.3AOP动态代理技术</h2><p>常用代理对象</p>
<ul>
<li><p><strong>JDK代理:</strong> 基于接口的动态代理技术</p>
<ul>
<li><p>目标对象必须要有接口</p>
</li>
<li><p><img src="http://picgo.kongshier.top/2767/image-20220312101601182.png" alt="image-20220312101601182"></p>
</li>
<li></li>
<li><p>&#96;&#96;&#96;java<br>public class ProxyTest {</p>
<pre><code>public static void main(String[] args) &#123;

    //目标对象
    final Target target = new Target();

    //增强对象  里面有before()和afterReturning()方法
    final Advice advice = new Advice();

    //返回值 就是动态生成的代理对象
    TargetInterface proxy = (TargetInterface) Proxy.newProxyInstance(
            target.getClass().getClassLoader(), //目标对象类加载器
            target.getClass().getInterfaces(), //目标对象相同的接口字节码对象数组
            new InvocationHandler() &#123;
                //调用代理对象的任何方法  实质执行的都是invoke方法
                @Override
                public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;
                    advice.before(); //前置增强
                    Object invoke = method.invoke(target, args);//执行目标方法
                    advice.afterReturning(); //后置增强
                    return invoke;
                &#125;
            &#125;
    );
    //调用代理对象的方法
    proxy.save();
&#125;
</code></pre>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **cglib代理:**基于父类的动态代理技术</span><br><span class="line"></span><br><span class="line">  - 第三方的代理 可以没有接口</span><br><span class="line"></span><br><span class="line">  - ![image-20220312101614278](http://picgo.kongshier.top/2767/image-20220312101614278.png)</span><br><span class="line"></span><br><span class="line">  - </span><br><span class="line"></span><br><span class="line">  - ```Java</span><br><span class="line">    public class ProxyTest &#123;</span><br><span class="line">    </span><br><span class="line">        public static void main(String[] args) &#123;</span><br><span class="line">    </span><br><span class="line">            //目标对象</span><br><span class="line">            final Target target = new Target();</span><br><span class="line">    </span><br><span class="line">            //增强对象</span><br><span class="line">            final Advice advice = new Advice();</span><br><span class="line">    </span><br><span class="line">            //返回值 就是动态生成的代理对象  基于cglib</span><br><span class="line">            //1、创建增强器</span><br><span class="line">            Enhancer enhancer = new Enhancer();</span><br><span class="line">            //2、设置父类（目标）</span><br><span class="line">            enhancer.setSuperclass(Target.class);</span><br><span class="line">            //3、设置回调</span><br><span class="line">            enhancer.setCallback(new MethodInterceptor() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public Object intercept(Object proxy, Method method, Object[] args, MethodProxy methodProxy) throws Throwable &#123;</span><br><span class="line">                    advice.before(); //执行前置</span><br><span class="line">                    Object invoke = method.invoke(target, args);//反射 执行目标</span><br><span class="line">                    advice.afterReturning(); //执行后置</span><br><span class="line">                    return invoke;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            //4、创建代理对象</span><br><span class="line">            Target proxy = (Target) enhancer.create();</span><br><span class="line">            proxy.save();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="6-4AOP概念"><a href="#6-4AOP概念" class="headerlink" title="6.4AOP概念"></a>6.4AOP概念</h2><ul>
<li>Spring的AOP实现底层:  是对上面的动态代理的代码<strong>进行封装</strong>，封装后只要关注的部分进行代码编写，并通过<strong>配置的方式</strong>完成指定目标的方法增强。</li>
</ul>
<p>常用术语：</p>
<ol>
<li>Target（目标对象）：代理的目标对象</li>
<li>Proxy（代理）：类被AOP织入增强后，就会产生一个结果代理类</li>
<li>Joinpoint（连接点）：指被拦截到的点。在Spring中，这些点指的是方法，Spring只支持方法的连接点。（可以被增强的方法，是链接点）</li>
<li><strong>Pointcut（切入点）</strong>：切入点就是对Joinpoint进行拦截的定义（要被增强的方法）</li>
<li><strong>Advice（通知&#x2F;增强）</strong>：拦截到Jointpoint之后所做的事情就是通知 </li>
<li><strong>Aspect（切面）</strong>：切入点 （Pointcut）+ 通知（Advice）</li>
<li><strong>Weavng（织入</strong>）：指切入点与通知结合的过程就是织入过程。是指把增强应用到目标对象来创建新的代理对象的过程。</li>
</ol>
<h2 id="6-5AOP明确事项"><a href="#6-5AOP明确事项" class="headerlink" title="6.5AOP明确事项"></a>6.5AOP明确事项</h2><ul>
<li>为了做什么：目标对象-&gt;代理对象 </li>
<li>怎么做：找到连接点（即方法）经过拦截方法定义后真正拦截到的使之成为切入点 经过一定的操作成为切面 </li>
<li>什么样的操作：通过织入把通知&#x2F;增强引入切入点 成为切面 最终的效果</li>
</ul>
<h3 id="6-5-1需要编写的内容"><a href="#6-5-1需要编写的内容" class="headerlink" title="6.5.1需要编写的内容"></a>6.5.1需要编写的内容</h3><ul>
<li>编写核心业务代码(目标类的目标方法)</li>
<li>编写切面类，切面类中有通知(增强功能方法)</li>
<li>在配置文件中，配置织入关系，即将哪些通知与哪些连接点进行结合</li>
</ul>
<h3 id="6-5-2AOP技术实现的内容"><a href="#6-5-2AOP技术实现的内容" class="headerlink" title="6.5.2AOP技术实现的内容"></a>6.5.2AOP技术实现的内容</h3><ul>
<li>配置切点，监控切入点的执行，创建代理对象进行增强</li>
<li>Spring框架监控切入点方法的执行。</li>
<li>一旦监控到切入点方法被运行，使用代理机制，动态创建目标对象的代理对象，根据通知类别，在代理对象的对应位置，将通知对应的功能织入，完成完整的代码逻辑运行。</li>
</ul>
<h3 id="6-5-3AOP底层使用哪种的代理方式"><a href="#6-5-3AOP底层使用哪种的代理方式" class="headerlink" title="6.5.3AOP底层使用哪种的代理方式"></a>6.5.3AOP底层使用哪种的代理方式</h3><ul>
<li>框架会目标类会判断是否实现了接口来觉得采用哪种动态代理方式<ul>
<li>jdk代理:实现接口</li>
<li>**cglib代理:**基于父类的动态代理技术</li>
</ul>
</li>
</ul>
<h2 id="6-6知识要点"><a href="#6-6知识要点" class="headerlink" title="6.6知识要点"></a>6.6知识要点</h2><ul>
<li><p>aop：面向切面编程</p>
</li>
<li><p>aop底层实现:基于JDK的动态代理和基于Cglib的动态代理</p>
</li>
<li><p>aop的重点概念:</p>
<ul>
<li>Pointcut(切入点)︰被增强的方法</li>
<li>Advice(通知&#x2F;增强)︰封装增强业务逻辑的方法</li>
<li>Aspect(切面)︰切点+通知</li>
<li>Weaving (织入)︰将切点与通知结合的过程</li>
</ul>
</li>
<li><p>开发明确事项:</p>
<ul>
<li><p>谁是切点(切点表达式配置)</p>
</li>
<li><p>谁是通知(切面类中的增强方法)</p>
</li>
<li><p>将切点和通知进行织入配置</p>
</li>
</ul>
</li>
</ul>
<h2 id="6-7基于xml的AOP开发"><a href="#6-7基于xml的AOP开发" class="headerlink" title="6.7基于xml的AOP开发"></a>6.7基于xml的AOP开发</h2><h3 id="6-7-1快速入门"><a href="#6-7-1快速入门" class="headerlink" title="6.7.1快速入门"></a>6.7.1快速入门</h3><ol>
<li>导入AOP相关坐标</li>
<li>创建目标接口和目标类(内部有切点)</li>
<li>创建切面类(内部有增强方法)</li>
<li>将目标类和切面类的对象创建权交给spring</li>
<li>在applicationContext.xml中配置织入关系</li>
<li>测试代码</li>
</ol>
<h4 id="实现的代码："><a href="#实现的代码：" class="headerlink" title="实现的代码："></a>实现的代码：</h4><ol>
<li><p>导入AOP相关坐标 在pom.xml中</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--AOP坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建目标接口和目标类(内部有切点)</p>
<p><img src="http://picgo.kongshier.top/2767/image-20220312153054648.png" alt="image-20220312153054648"></p>
<p>接口代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TargetInterface</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>目标类代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Target</span> <span class="keyword">implements</span> <span class="title class_">TargetInterface</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;save running.....&quot;</span>);</span><br><span class="line">        <span class="comment">//int i = 1/0;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>创建切面类(内部有增强方法)</p>
<p>切面类代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;前置增强..........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;后置增强..........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Proceeding JoinPoint:  正在执行的连接点===切点</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;环绕前增强....&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> pjp.proceed();<span class="comment">//切点方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;环绕后增强....&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;异常抛出增强..........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;最终增强..........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将目标类和切面类的对象创建权交给spring</p>
<p>引用applicationContext.xml文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span>  <span class="attr">aop命名空间在</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--目标对象  就是目标类的包地址到类名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;target&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.aop.Target&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--切面对象  就是切面累的包地址到类名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myAspect&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.aop.MyAspect&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在applicationContext.xml中配置织入关系</p>
<p>引用applicationContext.xml文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置织入：告诉spring框架 哪些方法(切点)需要进行哪些增强(前置、后置...)  必要由aop命名空间--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--声明切面 说明myAspect是切面类--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;myAspect&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--抽取切点表达式 --&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--aop:XXX增强的类型    method说明是哪个方法(方法名)是前置增强  pointcut：切点表达式，通过表达式形式可以指定多个方法--&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;myPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.itheima.aop.*.*(..))&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--切面：切点+通知--&gt;</span></span><br><span class="line">        指定com.itheima.aop下的Target类的save()方法</span><br><span class="line">        <span class="comment">&lt;!--&lt;aop:before method=&quot;before&quot; pointcut=&quot;execution(public void com.itheima.aop.Target.save())&quot;/&gt;--&gt;</span></span><br><span class="line">        指定com.itheima.aop下的任意类下的任意方法</span><br><span class="line">        <span class="comment">&lt;!--&lt;aop:before method=&quot;before&quot; pointcut=&quot;execution(* com.itheima.aop.*.*(..))&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;aop:after-returning method=&quot;afterReturning&quot; pointcut=&quot;execution(* com.itheima.aop.*.*(..))&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;aop:around method=&quot;around&quot; pointcut=&quot;execution(* com.itheima.aop.*.*(..))&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;aop:after-throwing method=&quot;afterThrowing&quot; pointcut=&quot;execution(* com.itheima.aop.*.*(..))&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;aop:after method=&quot;after&quot; pointcut=&quot;execution(* com.itheima.aop.*.*(..))&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;around&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;myPointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;myPointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>测试代码</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)</span><span class="comment">//指定配置文件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AopTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TargetInterface target;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        target.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="切点表达式的格式："><a href="#切点表达式的格式：" class="headerlink" title="切点表达式的格式："></a>切点表达式的格式：</h4><p>语句：</p>
<p>execution([修饰符] 返回值类型.包名.类名.方法名(参数列表)) </p>
<ul>
<li>修饰符可以省略不写</li>
<li>返回值类型、包名、类名、方法名可以使用星号*表示任意</li>
<li>包名与类名之间一个点.代表当前包下的类，两个点..表示当前包及其子包下的类</li>
<li>参数列表可以使用两个点..表示任意个数，任意类型的参数列表</li>
</ul>
<h4 id="切点表达式的抽取、"><a href="#切点表达式的抽取、" class="headerlink" title="切点表达式的抽取、"></a>切点表达式的抽取、</h4><ul>
<li>当多个增强的切点表达式相同时，可以将切点表达式进行抽取，在增强中<strong>使用pointcut-ref属性代替pointcut属性</strong>来引用抽取后的切点表达式。</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--抽取切点表达式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;myPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.itheima.aop.*.*(..))&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--环绕通知--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;around&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;myPointcut&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--最终通知--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;myPointcut&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>





<h3 id="6-7-3XMl配置AOP详解"><a href="#6-7-3XMl配置AOP详解" class="headerlink" title="6.7.3XMl配置AOP详解"></a>6.7.3XMl配置AOP详解</h3><h4 id="通知的类型"><a href="#通知的类型" class="headerlink" title="通知的类型"></a>通知的类型</h4><p>语法</p>
<blockquote>
<p>&lt; aop:通知类型method&#x3D;“切面类中方法名”pointcut&#x3D;“切点表达式”&gt; &lt; &#x2F;aop:通知类型&gt;</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>标签</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>前置通知</td>
<td>&lt; aop:before&gt;</td>
<td>用于配置<strong>前置通知</strong>。指定增强的方法在切入点方法之前执行</td>
</tr>
<tr>
<td>后置通知</td>
<td>&lt;aop:after-returning &gt;</td>
<td>用于配置<strong>后置通知</strong>。指定增强的方法在切入点方法之后执行</td>
</tr>
<tr>
<td>环绕通知</td>
<td>&lt;aop:around &gt;</td>
<td>用于配置<strong>环绕通知</strong>。指定增强的方法在切入点方法之前和之后都执行</td>
</tr>
<tr>
<td>异常抛出通知</td>
<td>&lt;aop:throwing &gt;</td>
<td>用于配置<strong>异常抛出通知</strong>。指定增强的方法在出现异常时执行</td>
</tr>
<tr>
<td>最终通知</td>
<td>&lt;aop:after &gt;</td>
<td>用于配置<strong>最终通知</strong>。无论增强方式执行是否有异常都会执行</td>
</tr>
</tbody></table>
</blockquote>
<h2 id="6-8AOP的注解开发"><a href="#6-8AOP的注解开发" class="headerlink" title="6.8AOP的注解开发"></a>6.8AOP的注解开发</h2><p>步骤</p>
<ol>
<li><p>创建目标接口和目标类(内部有切点)</p>
</li>
<li><p>创建切面类(内部有增强方法)</p>
</li>
<li><p>将目标类和切面类的对象创建权交给spring</p>
<p><img src="/ssm.assets/image-20220312181945759.png" alt="image-20220312181945759"></p>
<p><img src="/ssm.assets/image-20220312181924100.png" alt="image-20220312181924100"></p>
</li>
<li><p><strong>在切面类中使用注解配置织入关系</strong></p>
</li>
<li><p>在配置文件中开启组件扫描和AOP的自动代理</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--组件扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.itheima.anno&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--aop自动代理--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>测试</p>
</li>
</ol>
<h3 id="6-8-1注解通知的类型"><a href="#6-8-1注解通知的类型" class="headerlink" title="6.8.1注解通知的类型"></a>6.8.1注解通知的类型</h3><p>通知配置语法：@通知注解（“切点表达式”）。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>标签</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>前置通知</td>
<td>&lt; aop:before&gt;</td>
<td>用于配置<strong>前置通知</strong>。指定增强的方法在切入点方法之前执行</td>
</tr>
<tr>
<td>后置通知</td>
<td>&lt;aop:after-returning &gt;</td>
<td>用于配置<strong>后置通知</strong>。指定增强的方法在切入点方法之后执行</td>
</tr>
<tr>
<td>环绕通知</td>
<td>&lt;aop:around &gt;</td>
<td>用于配置<strong>环绕通知</strong>。指定增强的方法在切入点方法之前和之后都执行</td>
</tr>
<tr>
<td>异常抛出通知</td>
<td>&lt;aop:throwing &gt;</td>
<td>用于配置<strong>异常抛出通知</strong>。指定增强的方法在出现异常时执行</td>
</tr>
<tr>
<td>最终通知</td>
<td>&lt;aop:after &gt;</td>
<td>用于配置<strong>最终通知</strong>。无论增强方式执行是否有异常都会执行</td>
</tr>
</tbody></table>
<h3 id="6-8-2切点表达式的抽取"><a href="#6-8-2切点表达式的抽取" class="headerlink" title="6.8.2切点表达式的抽取"></a>6.8.2切点表达式的抽取</h3><p>同xml配置aop一样，我们可以将<strong>切点表达式抽取</strong>。抽取方式是在<strong>切面内定义方法</strong>，在该方法上<strong>使用@Pointcut注解定义切点表达式</strong>，然后在在<strong>增强注解中进行引用。</strong></p>
<p>在对应的通知使用注解@通知类.抽取的方法</p>
<p>例如：</p>
<p><img src="http://picgo.kongshier.top/2767/image-20220312183956517.png" alt="image-20220312183956517"></p>
<h1 id="7-Spring的事务控制"><a href="#7-Spring的事务控制" class="headerlink" title="7.Spring的事务控制"></a>7.Spring的事务控制</h1><ul>
<li>过程： 底层部分原理 -&gt; xml方式 -&gt; 注解方式</li>
</ul>
<h2 id="7-1-编程式事务控制（了解）"><a href="#7-1-编程式事务控制（了解）" class="headerlink" title="7.1 编程式事务控制（了解）"></a>7.1 编程式事务控制（了解）</h2><p>事务的实现+事务的定义&#x3D;&#x3D;&#x3D;（运行起来形成了）&#x3D;&#x3D;&#x3D;事务的状态</p>
<p>了解三个事务控制对象</p>
<ul>
<li>通过写代码控制事务，要写代码</li>
</ul>
<ol>
<li><p>PlatformTransactionManager（平台事务管理器）</p>
<ul>
<li>PlatformTransactionManager接口是spring的事务管理器，它里面提供了我们常用的操作事务的方法。</li>
</ul>
</li>
<li><p>TransactionDefinition  （事务定义对象）</p>
<ul>
<li><p>是事务的定义信息对象   定义的是参数或者是对象的信息</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>int getIsolationLevel()</td>
<td>获得事务的隔离级别</td>
</tr>
<tr>
<td>int getPropogationBehavior ( )</td>
<td>称得事务的传播行为</td>
</tr>
<tr>
<td>int getTimeout ()</td>
<td>获得超时时间</td>
</tr>
<tr>
<td>boolean isReadonly ()</td>
<td>是否只读</td>
</tr>
</tbody></table>
<ol>
<li>事务隔离级别<ul>
<li>设置隔离级别，可以解决事务并发产生的问题，如<strong>脏读、不可重复读和虚读 （）</strong> 。</li>
</ul>
</li>
<li>事务传播行为<ul>
<li>解决调用事务方法的统一性</li>
<li>REQUIRED：</li>
<li>SUPPORTS：</li>
<li>超时时间:默认值是-1，没有超时限制。如果有，以秒为单位进行设置</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p>TransactionStatus</p>
<p>被动的添加，不用我们自己添加</p>
<ul>
<li><p>提供的是事务的具体运行状态</p>
</li>
<li><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>boolean hassavepoint ( )</td>
<td>是否存储回滚点</td>
</tr>
<tr>
<td>boolean iscompleted ( )</td>
<td>事务是否完成</td>
</tr>
<tr>
<td>boolean isNewTransaction ( )</td>
<td>是否是新事务</td>
</tr>
<tr>
<td>boolean sRollbackonly ()</td>
<td>事务是否回滚</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ol>
<h2 id="7-2基于xml的声明式事务控制"><a href="#7-2基于xml的声明式事务控制" class="headerlink" title="7.2基于xml的声明式事务控制"></a>7.2基于xml的声明式事务控制</h2><p>&#x3D;&#x3D;采用声明的方式来处理事务&#x3D;&#x3D;  是在配置文件声明，用配置文件中声明事务来代替代码式处理事务</p>
<h4 id="作用："><a href="#作用：" class="headerlink" title="作用："></a>作用：</h4><ol>
<li>事务管理不侵入开发组件。解耦性</li>
<li>不需事务管理的时候，只需在设置文件上修改，即可去除事务管理事务，无需修改源码</li>
</ol>
<p>&#x3D;&#x3D;Spring声明式事务控制底层就是AOP&#x3D;&#x3D;</p>
<h3 id="7-2-1声明式事务控制的实现"><a href="#7-2-1声明式事务控制的实现" class="headerlink" title="7.2.1声明式事务控制的实现"></a>7.2.1声明式事务控制的实现</h3><ul>
<li>把所有的业务逻辑对象当做连接点</li>
<li>某些需要事务管理的业务逻辑对象视为切入点</li>
<li>事务管理视为增强&#x2F;通知</li>
</ul>
<p><strong>需要引入命名空间</strong>  </p>
<p><img src="/ssm.assets/image-20220314214228102.png" alt="image-20220314214228102"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--目标对象  内部的方法就是切点--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.AccountServiceImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;accountDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;accountDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置平台事务管理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--通知  事务的增强--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置事务的属性信息的--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--织入将通知和切连接，这里attributes是配置事务相关信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        下面的切点是说要对哪些方法进行增强，这里的method就是说针对某个method应该如何设置事务的属性</span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;transfer&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;REPEATABLE_READ&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;save&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;REPEATABLE_READ&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;REPEATABLE_READ&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;update*&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;REPEATABLE_READ&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--任意方法 使用默认的方法--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置事务的aop织入，才能通过事务配置进行控制--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--增强引用  增强与引用进行连用--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;txPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.itheima.service.impl.*.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPointcut&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>要点</p>
<ol>
<li>平台事务管理器</li>
<li>事务通知配置</li>
<li>事务aop配置织入</li>
</ol>
<h2 id="7-3注解的声明式事务控制"><a href="#7-3注解的声明式事务控制" class="headerlink" title="7.3注解的声明式事务控制"></a>7.3注解的声明式事务控制</h2><p>xml配置文件</p>
<ul>
<li>必须加入事务的注解驱动，才能把事务给控制住</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!--事物的注解驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>





<p>service层的文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;accountService&quot;)</span></span><br><span class="line"><span class="meta">@Transactional(isolation = Isolation.REPEATABLE_READ)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span>  <span class="comment">//注入</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上面也有一个Transaction一般以就近的为主</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional(isolation = Isolation.READ_COMMITTED, propagation = Propagation.REQUIRED)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String outMan, String inMan, <span class="type">double</span> money)</span> &#123;</span><br><span class="line">        accountDao.out(outMan, money);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        accountDao.in(inMan, money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//多个方法时  一样定义注解</span></span><br><span class="line">    <span class="comment">//@Transactional(isolation = Isolation.DEFAULT)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">xxx</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="7-3-1注解解析"><a href="#7-3-1注解解析" class="headerlink" title="7.3.1注解解析"></a>7.3.1注解解析</h3><ol>
<li>使用@Transactional在需要进行事务控制的类或是方法上修饰，注解可用的属性同xml配置方式，仍隔离级别、传播行为等。</li>
<li>注解使用在类上，那么该类下的所有方法都使用同一套注解参数配置。</li>
<li>使用在方法上，不同的方法可以采用不同的事务参数配置。</li>
<li>Xml配置文件中要开启事务的注解驱动<tx :annotation-driven /></li>
</ol>
<h3 id="7-3-2注解知识要点"><a href="#7-3-2注解知识要点" class="headerlink" title="7.3.2注解知识要点"></a>7.3.2注解知识要点</h3><ol>
<li>平台事务管理器 （xml方式）</li>
<li>事务通知的配置 （@Transaction注解配置）</li>
<li>事务aop配置织入  &lt; tx:annotation-driven transaction-manager&#x3D;”id名” &#x2F;&gt;</li>
</ol>
<h1 id="8-MyBatis"><a href="#8-MyBatis" class="headerlink" title="8.MyBatis"></a>8.MyBatis</h1><p>官网： <a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/">Mybatis </a>  <a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/">https://mybatis.org/mybatis-3/</a></p>
<h2 id="8-1概念"><a href="#8-1概念" class="headerlink" title="8.1概念"></a>8.1概念</h2><ol>
<li>MyBatis是一款优秀的<strong>持久层框架</strong>，用于简化JDBC开发  ，隐藏jdbc的繁杂操作<ul>
<li>负责将数据保存到数据库的那一层代码</li>
<li>JavaEE三层架构：表现层、业务层、持久层</li>
</ul>
</li>
<li>框架<ul>
<li>框架就是一个半成品软件，是一套可重用的、通用的、软件基础代码模型</li>
<li>在框架的基础之上构建软件编写更加高效、规范、通用、可扩展。</li>
</ul>
</li>
<li>JDBC缺点<ul>
<li>硬编码   配置文件<ul>
<li>注册驱动、获取链接    写了一堆链接字符串  </li>
<li>SQL语句   也写了一堆代码字符串</li>
</ul>
</li>
<li>操作繁琐  自动完成<ul>
<li>手动设置参数</li>
<li>手动封装结果集</li>
</ul>
</li>
</ul>
</li>
<li>解决jdbc开发存在的问题<ul>
<li>使用&#x3D;&#x3D;数据库连接池初始化&#x3D;&#x3D;连接资源</li>
<li>将sql语句抽取到xml配置文件中</li>
<li>使用反射、内省等底层技术，自动将实体与表进行属性与字段的自动映射</li>
</ul>
</li>
</ol>
<h2 id="8-2MyBatis-快速入门"><a href="#8-2MyBatis-快速入门" class="headerlink" title="8.2MyBatis 快速入门"></a>8.2MyBatis 快速入门</h2><p>步骤</p>
<ol>
<li>创建user表，添加数据</li>
<li>创建模块，导入坐标</li>
<li>编写MyBatis核心配置文件 –&gt; 替换链接信息，解决硬编码问题</li>
<li>编写SQL映射文件 –&gt;统一管理Sql语句，解决硬编码问题</li>
<li>编码<ol>
<li>定义POJO类</li>
<li>加载核心配置文件，获取SqlSessionFactory对象</li>
<li>获取SqlSession对象，执行SQL语句</li>
<li>释放资源</li>
</ol>
</li>
<li>编写测试类</li>
</ol>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>pom.xml配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis 依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--mysql 驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.46<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--junit 单元测试--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 添加slf4j日志api --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 添加logback-classic依赖 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 添加logback-core依赖 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>mybatis-config.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    目标对象的包</span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">environments：配置数据库连接环境信息。可以配置多个environment，通过default属性切换不同的environment</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--数据库连接信息--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///mybatis?useSSL=false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--数据库连接信息--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///mybatis?useSSL=false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--加载sql映射文件--&gt;</span></span><br><span class="line">    类路径</span><br><span class="line">   <span class="comment">&lt;!-- &lt;mapper resource=&quot;com/itheima/mapper/UserMapper.xml&quot;/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Mapper代理方式--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.mapper&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>Demo.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Mybatis 快速入门代码</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> 2、3两点就把之前的jdbc给替换了</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 加载mybatis的核心配置文件，获取 SqlSessionFactory</span></span><br><span class="line">        <span class="comment">//从官网复制过来</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 获取SqlSession对象，用它来执行sql</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="comment">//3. 执行sql 参数是命名空间的名称 test是上一级的名称 selectAll才是想要的查询名称，一级级通过，方便查询</span></span><br><span class="line">        List&lt;User&gt; users = sqlSession.selectList(<span class="string">&quot;test.selectAll&quot;</span>);</span><br><span class="line">        System.out.println(users);</span><br><span class="line">        <span class="comment">//4. 释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="8-3Mybatis-xml核心配置为文件"><a href="#8-3Mybatis-xml核心配置为文件" class="headerlink" title="8.3Mybatis.xml核心配置为文件"></a>8.3Mybatis.xml核心配置为文件</h2><p>要安装官方文件的顺序 进行配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">environments：配置数据库连接环境信息。可以配置多个environment，通过default属性切换不同的environment</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--默认使用的环境是development--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--数据源的类型是连接池--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--数据库连接信息--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///mybatis?useSSL=false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--数据库连接信息--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///mybatis?useSSL=false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>configuration配置<ul>
<li>oproperties属性 </li>
<li>settings设置</li>
<li>typeAliases类型别名</li>
<li>typeHandlers类型处理器</li>
<li>objectFactory对象工厂</li>
<li>plugins插件</li>
<li>environnents环境 ✔<ul>
<li>environment环境变量</li>
<li>transactionManager 事务管理器</li>
<li>dataSource数据源</li>
</ul>
</li>
<li>databaseldProvider数据库厂商标识 ✘</li>
<li>mappers映对器</li>
</ul>
</li>
</ul>
<h3 id="8-3-1MyBatis常用的配置解析"><a href="#8-3-1MyBatis常用的配置解析" class="headerlink" title="8.3.1MyBatis常用的配置解析"></a>8.3.1MyBatis常用的配置解析</h3><h4 id="1-environments标签"><a href="#1-environments标签" class="headerlink" title="1.environments标签"></a>1.environments标签</h4><p>配置文件</p>
<ul>
<li>事务管理器<ol>
<li>JDBC：多</li>
<li>MANAGED：少</li>
</ol>
</li>
<li>数据源配置<ol>
<li>POOLED：使用连接池将JDBC链接对象组织起来</li>
<li>UNPOOLED ：每次使用连接池都要设置打开和关闭链接</li>
<li>JNDI:</li>
</ol>
</li>
</ul>
<h4 id="2-mappers标签"><a href="#2-mappers标签" class="headerlink" title="2.mappers标签"></a>2.mappers标签</h4><ol>
<li>加载映射的方法<ol>
<li>使用相对于&#x3D;&#x3D;类路径&#x3D;&#x3D;的资源引用，例如: <mapper resource="org/mybatis/builder/AuthorMapper.xml"/>  ✔</li>
<li>使用完全限定&#x3D;&#x3D;资源定位符(URL)&#x3D;&#x3D;，例如:<mapper url="file:///var/mappers/AuthorMapper.xml"/>   </li>
<li>使用映射器&#x3D;&#x3D;接口实现类&#x3D;&#x3D;的完全限定类名，例如: <mapper class="org.mybatis.builder.AuthorMapper"/></li>
<li>将&#x3D;&#x3D;包&#x3D;&#x3D;内的映射器接口实现全部注册为映射器，例如: <package name="org.mybatis.builder" /></li>
</ol>
</li>
</ol>
<h4 id="3-Properties标签"><a href="#3-Properties标签" class="headerlink" title="3.Properties标签"></a>3.Properties标签</h4><p>实际开发中，习惯将数据源的配置信息单独抽取成一个properties文件，该标签可以加载额外配置的properties文件</p>
<ul>
<li>也就是链接数据库的信息，在另外创建一个jdbc.properties  在配置文件中使用properties标签引入jdbc.properties文件</li>
</ul>
<h4 id="4-typeAliases标签"><a href="#4-typeAliases标签" class="headerlink" title="4.typeAliases标签"></a>4.typeAliases标签</h4><ul>
<li>设置类型别名</li>
<li>顺序需要注意</li>
</ul>
<h2 id="8-4MyBatis的映射文件概述"><a href="#8-4MyBatis的映射文件概述" class="headerlink" title="8.4MyBatis的映射文件概述"></a>8.4MyBatis的映射文件概述</h2><p><img src="http://picgo.kongshier.top/2767/image-20220316220438509.png" alt="image-20220316220438509"></p>
<h2 id="8-5MyBatis的增删改查"><a href="#8-5MyBatis的增删改查" class="headerlink" title="8.5MyBatis的增删改查"></a>8.5MyBatis的增删改查</h2><p>前提是必须创建有了user数据库</p>
<h3 id="8-5-1增"><a href="#8-5-1增" class="headerlink" title="8.5.1增"></a>8.5.1增</h3><p>在mapper.xml文件中进行对SQL语句的编写</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--插入操作--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span>&gt;</span></span><br><span class="line">    insert into user values(#&#123;id&#125;,#&#123;username&#125;,#&#123;password&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>测试文件java代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="comment">//插入操作  </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//模拟user对象</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setUsername(<span class="string">&quot;DashaX&quot;</span>);</span><br><span class="line">    user.setPassword(<span class="string">&quot;123456789&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获得核心配置文件</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">    <span class="comment">//获得session工厂对象</span></span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">    <span class="comment">//获得session回话对象</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//执行操作  参数：namespace+id</span></span><br><span class="line">    sqlSession.insert(<span class="string">&quot;userMapper.save&quot;</span>,user);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//mybatis执行更新操作  提交事务  要有事务的提交才能把数据插入到数据库的表中。</span></span><br><span class="line">    sqlSession.commit();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="插入时要注意的问题"><a href="#插入时要注意的问题" class="headerlink" title="插入时要注意的问题"></a>插入时要注意的问题</h4><ol>
<li>插入语句使用insert标签</li>
<li>在映射文件中使用parameterType属性指定要插入的数据类型</li>
<li>Sql语句中使用#{实体属性名}方式引用实体中的属性值</li>
<li>插入操作使用的API是sqlSession.insert(“命名空间.id”,实体对象);</li>
<li>插入操作涉及数据库数据变化，所以要使用sqlSession对象显示的&#x3D;&#x3D;提交事务&#x3D;&#x3D;，即sqlSession.commit)</li>
</ol>
<h3 id="8-5-2改"><a href="#8-5-2改" class="headerlink" title="8.5.2改"></a>8.5.2改</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--修改操作  parameterType是参数类型，传过来的对象，就是目标对象的路劲--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span>&gt;</span></span><br><span class="line">    update user set username=#&#123;username&#125;,password=#&#123;password&#125; where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>测试代码  只要修改执行的操作代码    使用执行对应的增删改查的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="comment">//修改操作</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//模拟user对象</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(<span class="number">7</span>);</span><br><span class="line">    user.setUsername(<span class="string">&quot;lucy&quot;</span>);</span><br><span class="line">    user.setPassword(<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获得核心配置文件</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">    <span class="comment">//获得session工厂对象</span></span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">    <span class="comment">//获得session回话对象</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="comment">//执行操作  参数：namespace+id</span></span><br><span class="line">    sqlSession.update(<span class="string">&quot;userMapper.update&quot;</span>,user);</span><br><span class="line">    <span class="comment">//mybatis执行更新操作  提交事务</span></span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ol>
<li>修改语句使用update标签</li>
<li>修改操作使用的API是sqlSession.update(“命名空间.id”,id);</li>
</ol>
<h3 id="8-5-2删"><a href="#8-5-2删" class="headerlink" title="8.5.2删"></a>8.5.2删</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--删除操作--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span>&gt;</span></span><br><span class="line">    delete from user where id=#&#123;abc&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="comment">//删除操作</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获得核心配置文件</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">    <span class="comment">//获得session工厂对象</span></span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">    <span class="comment">//获得session回话对象</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="comment">//执行操作  参数：namespace+id  后面的数字是id的值     namespace：命名空间</span></span><br><span class="line">    sqlSession.delete(<span class="string">&quot;userMapper.delete&quot;</span>,<span class="number">8</span>);</span><br><span class="line">    <span class="comment">//mybatis执行更新操作  提交事务</span></span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="注意-1"><a href="#注意-1" class="headerlink" title="注意"></a>注意</h4><ol>
<li>删除语句使用delete标签</li>
<li>Sql语句中使用#{任意字符串}方式引用传递的单个参数</li>
<li>删除操作使用的API是sqlSession.delete(“命名空间.id”,Object);</li>
</ol>
<h3 id="8-5-3查"><a href="#8-5-3查" class="headerlink" title="8.5.3查"></a>8.5.3查</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--查询操作--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span>&gt;</span></span><br><span class="line">    select * from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="comment">//查询操作</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//获得核心配置文件</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">    <span class="comment">//获得session工厂对象</span></span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">    <span class="comment">//获得session回话对象</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="comment">//执行操作  参数：namespace+id</span></span><br><span class="line">    List&lt;User&gt; userList = sqlSession.selectList(<span class="string">&quot;userMapper.findAll&quot;</span>);</span><br><span class="line">    <span class="comment">//打印数据</span></span><br><span class="line">    System.out.println(userList);</span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="8-6MyBatis的API"><a href="#8-6MyBatis的API" class="headerlink" title="8.6MyBatis的API"></a>8.6MyBatis的API</h2><h3 id="8-6-1SqlSession工厂构建器SqlSessionFactoryBuilder"><a href="#8-6-1SqlSession工厂构建器SqlSessionFactoryBuilder" class="headerlink" title="8.6.1SqlSession工厂构建器SqlSessionFactoryBuilder"></a>8.6.1SqlSession工厂构建器SqlSessionFactoryBuilder</h3><ul>
<li>API : SqlSessionFactory   builder(InputStream inputStream)</li>
<li><img src="http://picgo.kongshier.top/2767/image-20220317194649801.png" alt="image-20220317194649801"></li>
<li>SqlSessionFactory的API <ol>
<li>openSession()  : 获得打开绘画   ，默认会开启事务 但是不会自动提交，需要手动提交</li>
<li>openSession(boolean autoCommit)  :  参数是否自动提交，设置true 就会自动提交事务</li>
</ol>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">✔SqlSession sqlSession = sqlSessionFactory.openSession(true);</span><br></pre></td></tr></table></figure>

<h3 id="8-6-2SqlSession会话对象-✔"><a href="#8-6-2SqlSession会话对象-✔" class="headerlink" title="8.6.2SqlSession会话对象 ✔"></a>8.6.2SqlSession会话对象 ✔</h3><p><img src="http://picgo.kongshier.top/2767/image-20220317200509715.png" alt="image-20220317200509715"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--根据id进行查询  条件查询--&gt;</span><br><span class="line">&lt;select id=<span class="string">&quot;findById&quot;</span> resultType=<span class="string">&quot;user&quot;</span> parameterType=<span class="string">&quot;int&quot;</span>&gt;</span><br><span class="line">    select * from user where id=#&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>



<h2 id="8-7Mybatis的Dao层实现"><a href="#8-7Mybatis的Dao层实现" class="headerlink" title="8.7Mybatis的Dao层实现"></a>8.7Mybatis的Dao层实现</h2><h3 id="8-7-1传统的开发方式"><a href="#8-7-1传统的开发方式" class="headerlink" title="8.7.1传统的开发方式"></a>8.7.1传统的开发方式</h3><ol>
<li><p>编写UserDao接口</p>
</li>
<li><p><img src="/ssm.assets/image-20220317202102478.png" alt="image-20220317202102478"></p>
</li>
<li><p>&#96;&#96;&#96;java<br>&#x2F;&#x2F;传统方式   比较繁琐 要写接口 实现接口的方法<br>UserMapper mapper &#x3D; sqlSession.getMapper();<br>List<User> all &#x3D; mapper.findAll();<br>System.out.println(all);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 8.7.2代理开发方式</span><br><span class="line"></span><br><span class="line">- 采用Mybatis的代理开发方式实现DAO层的开发，==企业的主流==</span><br><span class="line"></span><br><span class="line">- Mapper接口开发方法只需要程序员编写Mapper接口(相当于Dao接口)，由Mybatis框架根据按口疋乂创建按口的动态代理对象，代理对象的方法体同上边Dao接口，实现类方法。</span><br><span class="line"></span><br><span class="line">Mapper接口开发需要遵循以下规范:</span><br><span class="line"></span><br><span class="line">1. Mapper.xml文件中的namespace与mapper接口的全限定名相同</span><br><span class="line">2. Mapper接口方法名和Mapper.xml中定义的每个statement的id相同</span><br><span class="line">3. Mapper接口方法的输入参数类型和mapper.xml中定义的每个sql的parameterType的类型相同</span><br><span class="line">4. Mapper接口方法的输出参数类型和mapper.xml中定义的每个sql的resultType的类型相同</span><br><span class="line"></span><br><span class="line">![image-20220317202821855](http://picgo.kongshier.top/2767/image-20220317202821855.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 测试代理方式</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">public class ServiceDemo &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws IOException &#123;</span><br><span class="line"></span><br><span class="line">        InputStream resourceAsStream = Resources.getResourceAsStream(&quot;sqlMapConfig.xml&quot;);</span><br><span class="line">        //创建SqlSessionFactory工厂</span><br><span class="line">        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        //代理方式对Dao层实现</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        //查询所有</span><br><span class="line">        List&lt;User&gt; all = mapper.findAll();</span><br><span class="line">        System.out.println(all);</span><br><span class="line"></span><br><span class="line">        //通过id查询</span><br><span class="line">        User user = mapper.findById(1);</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><ol>
<li><p>传统的开发形式  （手动dao层实现）</p>
<ul>
<li><p>编写接口 </p>
</li>
<li><p>实现接口</p>
</li>
<li><p>配置文件中</p>
</li>
</ul>
</li>
<li><p>代理方式开发</p>
<ul>
<li>编写接口</li>
<li>不需要实现接口</li>
<li>接口中的方法名、参数类型、返回值类型和配置文件中的一样即可</li>
</ul>
</li>
</ol>
<h1 id="9-MyBatis映射文件深入"><a href="#9-MyBatis映射文件深入" class="headerlink" title="9.MyBatis映射文件深入"></a>9.MyBatis映射文件深入</h1><h3 id="9-1动态sql语句"><a href="#9-1动态sql语句" class="headerlink" title="9.1动态sql语句"></a>9.1动态sql语句</h3><blockquote>
<p>以前的简单的不能满足比较复杂的业务逻辑  </p>
</blockquote>
<ul>
<li><p>Dynamic SQl </p>
<p>主要是使用 if 语句  在实际开发中使用的比较多</p>
<ol>
<li>if  ✔</li>
<li>choose (when, otherwise)</li>
<li>trim (where, set)</li>
<li>foreach</li>
</ol>
</li>
</ul>
<h3 id="SQl环境"><a href="#SQl环境" class="headerlink" title="SQl环境"></a>SQl环境</h3><p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//模拟条件user</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">condition</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        condition.setId(<span class="number">1</span>);</span><br><span class="line">        condition.setUsername(<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        condition.setPassword(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">        List&lt;User&gt; userList = mapper.findByCondition(condition);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//模拟ids的数据  这个foreach执行sql语句</span></span><br><span class="line">        List&lt;Integer&gt; ids = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">        ids.add(<span class="number">1</span>);</span><br><span class="line">        ids.add(<span class="number">2</span>);</span><br><span class="line">        List&lt;User&gt; userList = mapper.findByIds(ids);</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>&#x3D;&#x3D;动态SQL在xml中的抽取&#x3D;&#x3D;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--sql语句抽取--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;selectUser&quot;</span>&gt;</span>select * from user<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>所以在下面的if、foreach语句中的多了&#x3D;&#x3D;include&#x3D;&#x3D;标签  有一个属性refid 就是在抽取中的 id 值</p>
<h3 id="9-2动态sql语句-if"><a href="#9-2动态sql语句-if" class="headerlink" title="9.2动态sql语句  if"></a>9.2动态sql语句  if</h3><ul>
<li>根据实体类的取值不同，使用不同的sql语句进行查询。 if 判断是否是当前对应的值</li>
<li><em>where</em> 元素只会在子元素返回任何内容的情况下才插入 “WHERE” 子句。而且，若子句的开头为 “AND” 或 “OR”，<em>where</em> 元素也会将它们去除</li>
</ul>
<p>mapper.xml配置文件</p>
<ul>
<li>在接口类中 创建有方法 findByCondition  参数类型值是  user  返回值是user</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByCondition&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectUser&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--根据是否有条件添加where 如果是id ，username ，password都没有则不用在if 外面嵌套一个where标签--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=0&quot;</span>&gt;</span></span><br><span class="line">            and id=#&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username!=null&quot;</span>&gt;</span></span><br><span class="line">            and username=#&#123;username&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password!=null&quot;</span>&gt;</span></span><br><span class="line">            and password=#&#123;password&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="9-3-动态sql语句-foreach"><a href="#9-3-动态sql语句-foreach" class="headerlink" title="9.3 动态sql语句  foreach"></a>9.3 动态sql语句  foreach</h3><ul>
<li><p>查询多个内容</p>
</li>
<li></li>
<li><p>在接口类中 创建有方法 findByIds    参数类型值是  list   返回值是user</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByIds&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectUser&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- collection:集合或者数据的参数值  open ：是以什么开始的 ，close以什么结束 ，item负责接受id中的每一个值 ，separator：分隔符 进行拼接--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">open</span>=<span class="string">&quot;id in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="9-4typeHandlers标签"><a href="#9-4typeHandlers标签" class="headerlink" title="9.4typeHandlers标签"></a>9.4typeHandlers标签</h3><ul>
<li>MyBatis在预处理语句（PreparedStatement）中设置一个参数，或者是从结果中取出一个值时，都会使用类型处理器的值合适的方式转换成Java类型。以下是一些默认的处理器：</li>
</ul>
<p><img src="http://picgo.kongshier.top/2767/image-20220318200940594.png" alt="image-20220318200940594"></p>
<p>若是以上的默认处理器不能满足要求，则自己自定义处理器</p>
<p>步骤：</p>
<ol>
<li>定义转换类继承类&#x3D;&#x3D;BaseTypeHandler&lt; T &gt;&#x3D;&#x3D;  泛型</li>
<li>覆盖4个未实现的方法，其中setNonNullParameter为java程序设置数据到数据库的回调方法，getNullableResult为查询时，mysql的字符串类型转换成java的Type类型的方法</li>
<li>在MyBatis核心配置文件中进行注册</li>
<li>测试转换是否正确</li>
</ol>
<p>1.定义TypeHandler </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DateTypeHandler</span> <span class="keyword">extends</span> <span class="title class_">BaseTypeHandler</span>&lt;Date&gt; &#123;</span><br><span class="line">    <span class="comment">//将java类型 转换成 数据库需要的类型</span></span><br><span class="line">    <span class="comment">//参数i表示表中第几个字段，参数s表示表中的字段名，两种表示方式</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNonNullParameter</span><span class="params">(PreparedStatement preparedStatement, <span class="type">int</span> i, Date date, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="comment">// getTime()获取时间的毫秒值</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">time</span> <span class="operator">=</span> date.getTime();</span><br><span class="line">        preparedStatement.setLong(i,time);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将数据库中的类型 转换成java类型</span></span><br><span class="line">    <span class="comment">//String参数 : 要转换的字段名称</span></span><br><span class="line">    <span class="comment">//ResultSet : 查询出的结果集</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getNullableResult</span><span class="params">(ResultSet resultSet, String s)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="comment">//获得结果集中需要的数据(long) 转换成Date类型 返回</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">aLong</span> <span class="operator">=</span> resultSet.getLong(s);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(aLong);</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将数据库中类型 转换成java类型</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getNullableResult</span><span class="params">(ResultSet resultSet, <span class="type">int</span> i)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">aLong</span> <span class="operator">=</span> resultSet.getLong(i);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(aLong);</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将数据库中类型 转换成java类型</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getNullableResult</span><span class="params">(CallableStatement callableStatement, <span class="type">int</span> i)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">aLong</span> <span class="operator">=</span> callableStatement.getLong(i);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(aLong);</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.注册配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册类型处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;com.itheima.handler.DateTypeHandler&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeHandler</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3.mapper中的方法   要创建有user数据表</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    insert into user values(#&#123;id&#125;,#&#123;username&#125;,#&#123;password&#125;,#&#123;birthday&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select * from user where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>4.测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//插入数据</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建user</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setUsername(<span class="string">&quot;ceshi&quot;</span>);</span><br><span class="line">    user.setPassword(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">    user.setBirthday(<span class="keyword">new</span> <span class="title class_">Date</span>());<span class="comment">//当前时间</span></span><br><span class="line">    <span class="comment">//执行保存造作</span></span><br><span class="line">    mapper.save(user);</span><br><span class="line"></span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.findById(<span class="number">15</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;user中的birthday：&quot;</span>+user.getBirthday());</span><br><span class="line"></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="9-5Plugins标签"><a href="#9-5Plugins标签" class="headerlink" title="9.5Plugins标签"></a>9.5Plugins标签</h3><p>MyBatis可以使用第三方的插件来对功能进行扩展，&#x3D;&#x3D;分页助手PageHelper是将分页的复杂操作进行封装&#x3D;&#x3D;，使用简单的方式即可获得分页的相关数据</p>
<p>开发步骤:</p>
<ol>
<li>导入通用&#x3D;&#x3D;PageHelper&#x3D;&#x3D;的坐标</li>
<li>在mybatis核心配置文件中&#x3D;&#x3D;配置PageHelper插件&#x3D;&#x3D;</li>
<li>测试分页数据获取</li>
</ol>
<p>首先要把表的全部内容查看以下，方便设置分页</p>
<ol>
<li></li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--page分页插件配置的坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.7.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.jsqlparser<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsqlparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>2.配置PageHelper插件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置分页助手插件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageHelper&quot;</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--指定方言 dialect 数据库方言主要用来实现对查询的优化，实现分页语句以及count语句的自动生成，方言会生成适合于该特定数据库的效率较高的SQL语法。--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dialect&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4.测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分页plugins插件</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置分页相关参数   当前页(页码) 每页显示的条数（显示的条数）</span></span><br><span class="line">    PageHelper.startPage(<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; userList = mapper.findAll();</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获得与分页相关参数  对象pageInfo   </span></span><br><span class="line">    PageInfo&lt;User&gt; pageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;User&gt;(userList);</span><br><span class="line">    System.out.println(<span class="string">&quot;当前页：&quot;</span>+pageInfo.getPageNum());</span><br><span class="line">    System.out.println(<span class="string">&quot;每页显示条数：&quot;</span>+pageInfo.getPageSize());</span><br><span class="line">    System.out.println(<span class="string">&quot;总条数：&quot;</span>+pageInfo.getTotal());</span><br><span class="line">    System.out.println(<span class="string">&quot;总页数：&quot;</span>+pageInfo.getPages());</span><br><span class="line">    System.out.println(<span class="string">&quot;上一页：&quot;</span>+pageInfo.getPrePage());</span><br><span class="line">    System.out.println(<span class="string">&quot;下一页：&quot;</span>+pageInfo.getNextPage());</span><br><span class="line">    System.out.println(<span class="string">&quot;是否是第一个：&quot;</span>+pageInfo.isIsFirstPage());</span><br><span class="line">    System.out.println(<span class="string">&quot;是否是最后一个：&quot;</span>+pageInfo.isIsLastPage());</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h3><p>MyBatis映射文件配置 标签</p>
<ol>
<li>&lt; select &gt;  : 查询</li>
<li>&lt; insert&gt;  : 插入</li>
<li>&lt; uodate&gt;  : 修改</li>
<li>&lt; delect &gt;  : 删除</li>
<li>&lt; where&gt;  : where条件</li>
<li>&lt; if &gt;  : if判断</li>
<li>&lt; foreach &gt;  : 循环</li>
<li>&lt; sql &gt;  : sql片段抽取</li>
</ol>
<h4 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h4><ol>
<li>properties标签:该标签可以加载外部的</li>
<li>properties文件typeAliases标签∶设置类型别名</li>
<li>environments标签:数据源环境配置标签</li>
<li>typeHandlers标签:配置自定义类型处理器</li>
<li>plugins标签:配置MyBatis的插件</li>
</ol>
<h1 id="10-MyBatis的多表操作"><a href="#10-MyBatis的多表操作" class="headerlink" title="10.MyBatis的多表操作"></a>10.MyBatis的多表操作</h1><ul>
<li>多对多   ： </li>
<li>多对一   ：</li>
<li>一对多   ：</li>
</ul>
<h2 id="10-1-一对一查询"><a href="#10-1-一对一查询" class="headerlink" title="10.1 一对一查询"></a>10.1 一对一查询</h2><ul>
<li>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户</li>
<li>一对一查询的需求：查询一个订单，就能查询出该订单的所有用户</li>
</ul>
<h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><ol>
<li><p>创建Order、User、Role实体</p>
</li>
<li><p>OrderMapper、UserMapper接口</p>
</li>
<li><p>创建UserMapper.xml 、 OrderMapper.xml 配置文件</p>
<p><img src="/ssm.assets/image-20220318212205284.png" alt="image-20220318212205284"></p>
</li>
<li><p>加载映射文件</p>
<p>- </p>
<ul>
<li>&#96;&#96;&#96;xml<!--加载映射文件-->
<mappers>
    <mapper resource="com/itheima/mapper/UserMapper.xml"></mapper>
    <mapper resource="com/itheima/mapper/OrderMapper.xml"></mapper>
</mappers>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">OrderMappper配置文件</span><br><span class="line"></span><br><span class="line">```xml</span><br><span class="line">&lt;mapper namespace=&quot;com.itheima.mapper.OrderMapper&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultMap=&quot;orderMap&quot;&gt;</span><br><span class="line">        SELECT *,o.id oid FROM orders o,USER u WHERE o.uid=u.id</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;resultMap id=&quot;orderMap&quot; type=&quot;order&quot;&gt;</span><br><span class="line">        &lt;!--手动指定字段与实体属性的映射关系</span><br><span class="line">            column: 数据表的字段名称</span><br><span class="line">            property：实体的属性名称</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;id column=&quot;oid&quot; property=&quot;id&quot;&gt;&lt;/id&gt;</span><br><span class="line">        &lt;result column=&quot;ordertime&quot; property=&quot;ordertime&quot;&gt;&lt;/result&gt;</span><br><span class="line">        &lt;result column=&quot;total&quot; property=&quot;total&quot;&gt;&lt;/result&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--查询user的id、username、password、birthday--&gt;</span><br><span class="line">        &lt;!--&lt;result column=&quot;uid&quot; property=&quot;user.id&quot;&gt;&lt;/result&gt;</span><br><span class="line">        &lt;result column=&quot;username&quot; property=&quot;user.username&quot;&gt;&lt;/result&gt;</span><br><span class="line">        &lt;result column=&quot;password&quot; property=&quot;user.password&quot;&gt;&lt;/result&gt;</span><br><span class="line">        &lt;result column=&quot;birthday&quot; property=&quot;user.birthday&quot;&gt;&lt;/result&gt;--&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--</span><br><span class="line">            property: 当前实体(order)中的属性名称(private User user)</span><br><span class="line">            javaType: 当前实体(order)中的属性的类型(User)</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;!--与上诉的相比就是把user给提取出来，单独处理--&gt;</span><br><span class="line">        &lt;association property=&quot;user&quot; javaType=&quot;user&quot;&gt;</span><br><span class="line">            &lt;!--配置的是user的uid等--&gt;</span><br><span class="line">            &lt;id column=&quot;uid&quot; property=&quot;id&quot;&gt;&lt;/id&gt;</span><br><span class="line">            &lt;result column=&quot;username&quot; property=&quot;username&quot;&gt;&lt;/result&gt;</span><br><span class="line">            &lt;result column=&quot;password&quot; property=&quot;password&quot;&gt;&lt;/result&gt;</span><br><span class="line">            &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;&gt;&lt;/result&gt;</span><br><span class="line">        &lt;/association&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h2 id="10-2一对多查询"><a href="#10-2一对多查询" class="headerlink" title="10.2一对多查询"></a>10.2一对多查询</h2><ul>
<li>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户</li>
<li>一对多查询的需求：查询一个用户，就能查询出该用户具有的订单</li>
</ul>
<p>User中的订单集合</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//描述的是当前用户存在哪些订单  多个订单用集合存储</span></span><br><span class="line"><span class="keyword">private</span> List&lt;Order&gt; orderList;</span><br></pre></td></tr></table></figure>

<p>UserMappper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--返回结果的映射封装--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;uid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;birthday&quot;</span> <span class="attr">property</span>=<span class="string">&quot;birthday&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置集合信息</span></span><br><span class="line"><span class="comment">        property:集合名称</span></span><br><span class="line"><span class="comment">        ofType：当前集合中的数据类型</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;orderList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;order&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--封装order的数据--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;oid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ordertime&quot;</span> <span class="attr">property</span>=<span class="string">&quot;ordertime&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;total&quot;</span> <span class="attr">property</span>=<span class="string">&quot;total&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--SQL语句查询--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">    SELECT *,o.id oid FROM USER u,orders o WHERE u.id=o.uid</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//一对多模型</span></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    List&lt;User&gt; userList = mapper.findAll();</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="10-3多对多查询"><a href="#10-3多对多查询" class="headerlink" title="10.3多对多查询"></a>10.3多对多查询</h2><ul>
<li>用户表和订单表的关系为，一个用户有多个角色，一个角色被多个用户使用</li>
<li>多对多查询的需求：查询用户同时查询出该用户的所有角色</li>
</ul>
<p><img src="http://picgo.kongshier.top/2767/image-20220319162709238.png" alt="image-20220319162709238"></p>
<ol>
<li>创建实体Role：包括 id 、roleName roleDesc</li>
<li>创建实体User：包括：userName、id</li>
</ol>
<p>配置文件中的自定义别名</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--自定义别名--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.itheima.domain.Order&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;order&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.itheima.domain.Role&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;role&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>User中的角色集合</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//描述的是当前用户具备哪些角色</span></span><br><span class="line"><span class="keyword">private</span> List&lt;Role&gt; roleList;</span><br></pre></td></tr></table></figure>



<p>UserMappper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--返回结果的映射封装--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userRoleMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--user的信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;userId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;birthday&quot;</span> <span class="attr">property</span>=<span class="string">&quot;birthday&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--user内部的roleList信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;roleList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;roleId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;roleName&quot;</span> <span class="attr">property</span>=<span class="string">&quot;roleName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;roleDesc&quot;</span> <span class="attr">property</span>=<span class="string">&quot;roleDesc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--SQL语句查询--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findUserAndRoleAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userRoleMap&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--u是别名，ur是sys_user_role的别名，r是sys_role的别名--&gt;</span></span><br><span class="line">    SELECT * FROM USER u,sys_user_role ur,sys_role r WHERE u.id=ur.userId AND ur.roleId=r.id</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="10-4MyBatis多表配置总结"><a href="#10-4MyBatis多表配置总结" class="headerlink" title="10.4MyBatis多表配置总结"></a>10.4MyBatis多表配置总结</h2><ul>
<li>一对一配置：使用 <resultMap> +<association>做配置</li>
<li>一对多配置：使用 <resultMap>+ <collection> 做配置</li>
<li>多对多配置：使用 <resultMap>+ <collection> 做配置  ， 多出一张中间表</li>
</ul>
<h1 id="11-MyBatis的注解开发"><a href="#11-MyBatis的注解开发" class="headerlink" title="11.MyBatis的注解开发"></a>11.MyBatis的注解开发</h1><p>常用的注解</p>
<ul>
<li>@Insert:实现新增</li>
<li>@Update:实现更新</li>
<li>@Delete:实现删除</li>
<li>@Select:实现查询</li>
<li>@Result:&#x3D;&#x3D;实现结果集封装&#x3D;&#x3D;</li>
<li>@Results: 可以与@Result一起使用，&#x3D;&#x3D;封装多个结果集&#x3D;&#x3D;</li>
<li>@One:实现一对一结果集封装</li>
<li>@Many:实现一对多结果集封装</li>
</ul>
<h2 id="11-1MyBatis的增删改查操作"><a href="#11-1MyBatis的增删改查操作" class="headerlink" title="11.1MyBatis的增删改查操作"></a>11.1MyBatis的增删改查操作</h2><p> 测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisTest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> UserMapper mapper;</span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//数据源</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//构建工厂</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">        <span class="comment">//事务自动提交</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">        mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//保存操作</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setUsername(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        mapper.save(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//更新操作</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="number">18</span>);</span><br><span class="line">        user.setUsername(<span class="string">&quot;lucy&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">        mapper.update(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除操作</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span>&#123;</span><br><span class="line">        mapper.delete(<span class="number">18</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据id查询</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindById</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.findById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查询所有</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; all = mapper.findAll();</span><br><span class="line">        <span class="keyword">for</span> (User user : all) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>sqlMapConfig.xml的配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--加载映射关系--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定接口所在的包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.mapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>UserMapper接口 里面的增删改查的注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into user values(#&#123;id&#125;,#&#123;username&#125;,#&#123;password&#125;,#&#123;birthday&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update user set username=#&#123;username&#125;,password=#&#123;password&#125; where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="11-2MyBatis的注解实现复杂映射开发"><a href="#11-2MyBatis的注解实现复杂映射开发" class="headerlink" title="11.2MyBatis的注解实现复杂映射开发"></a>11.2MyBatis的注解实现复杂映射开发</h2><ul>
<li>使用的注解主要是@Results  、@Result 、@One 、@Many注解</li>
</ul>
<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisTest2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//OrderMapper</span></span><br><span class="line">    <span class="keyword">private</span> OrderMapper mapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">        mapper = sqlSession.getMapper(OrderMapper.class);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Order&gt; all = mapper.findAll();</span><br><span class="line">        <span class="keyword">for</span> (Order order : all) &#123;</span><br><span class="line">            System.out.println(order);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>OrderMapper接口 注解方式</p>
<p>这个查询效率比较低,每个结果还要去查询user表</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一</span></span><br><span class="line"><span class="comment">//o.id字段的别名oid</span></span><br><span class="line"><span class="meta">@Select(&quot;select *,o.id oid from orders o,user u where o.uid=u.id&quot;)</span></span><br><span class="line"><span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;oid&quot;,property = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;ordertime&quot;,property = &quot;ordertime&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;total&quot;,property = &quot;total&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;uid&quot;,property = &quot;user.id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;username&quot;,property = &quot;user.username&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;password&quot;,property = &quot;user.password&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Order&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式二</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from orders&quot;)</span></span><br><span class="line">    <span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">            @Result(column = &quot;id&quot;,property = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">            @Result(column = &quot;ordertime&quot;,property = &quot;ordertime&quot;),</span></span><br><span class="line"><span class="meta">            @Result(column = &quot;total&quot;,property = &quot;total&quot;),</span></span><br><span class="line"><span class="meta">            @Result(</span></span><br><span class="line"><span class="meta">                    property = &quot;user&quot;, //要封装的属性名称</span></span><br><span class="line"><span class="meta">                    column = &quot;uid&quot;, //根据那个 字段 去查询user表的数据</span></span><br><span class="line"><span class="meta">                    javaType = User.class, //要封装的实体类型</span></span><br><span class="line"><span class="meta">                    //select属性 代表查询那个接口的方法获得数据 从UserMapper中获得id数据  也就是对方的id，使用别人的接口的方法</span></span><br><span class="line"><span class="meta">                    one = @One(select = &quot;com.itheima.mapper.UserMapper.findById&quot;)</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br></pre></td></tr></table></figure>

<h2 id="11-3MyBtais的一对多的查询注解开发"><a href="#11-3MyBtais的一对多的查询注解开发" class="headerlink" title="11.3MyBtais的一对多的查询注解开发"></a>11.3MyBtais的一对多的查询注解开发</h2><p>UserMapper接口中的@Result注解方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line"><span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">    //id = true 标识下面的@Result是id</span></span><br><span class="line"><span class="meta">        @Result(id=true ,column = &quot;id&quot;,property = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;username&quot;,property = &quot;username&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;password&quot;,property = &quot;password&quot;),</span></span><br><span class="line"><span class="meta">        @Result(</span></span><br><span class="line"><span class="meta">                property = &quot;orderList&quot;,</span></span><br><span class="line"><span class="meta">                column = &quot;id&quot;,//当前的id来使用对方的id</span></span><br><span class="line"><span class="meta">                javaType = List.class,</span></span><br><span class="line"><span class="meta">                many = @Many(select = &quot;com.itheima.mapper.OrderMapper.findByUid&quot;)</span></span><br><span class="line"><span class="meta">        )</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findUserAndOrderAll</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisTest2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//OrderMapper</span></span><br><span class="line">    <span class="keyword">private</span> OrderMapper mapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">        mapper = sqlSession.getMapper(OrderMapper.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Order&gt; all = mapper.findAll();</span><br><span class="line">        <span class="keyword">for</span> (Order order : all) &#123;</span><br><span class="line">            System.out.println(order);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="11-4MyBatis的多对多查询"><a href="#11-4MyBatis的多对多查询" class="headerlink" title="11.4MyBatis的多对多查询"></a>11.4MyBatis的多对多查询</h2><p>RoleMapper的接口方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;SELECT * FROM sys_user_role ur,sys_role r WHERE ur.roleId=r.id AND ur.userId=#&#123;uid&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Role&gt; <span class="title function_">findByUid</span><span class="params">(<span class="type">int</span> uid)</span>;</span><br></pre></td></tr></table></figure>



<p>通过在UserMapper中通过USER的id值，查询到Role中的id值  （对多查询）</p>
<p>UserMapper接口方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;SELECT * FROM USER&quot;)</span></span><br><span class="line"><span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">        @Result(id = true,column = &quot;id&quot;,property = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;username&quot;,property = &quot;username&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;password&quot;,property = &quot;password&quot;),</span></span><br><span class="line"><span class="meta">        @Result(</span></span><br><span class="line"><span class="meta">                property = &quot;roleList&quot;,</span></span><br><span class="line"><span class="meta">                column = &quot;id&quot;,//是上面sql语句查询出的id值</span></span><br><span class="line"><span class="meta">                javaType = List.class,</span></span><br><span class="line"><span class="meta">                many = @Many(select = &quot;com.itheima.mapper.RoleMapper.findByUid&quot;)</span></span><br><span class="line"><span class="meta">        )</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="comment">//User</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findUserAndRoleAll</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisTest4</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserMapper mapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">        mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; userAndRoleAll = mapper.findUserAndRoleAll();</span><br><span class="line">        <span class="keyword">for</span> (User user : userAndRoleAll) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="12-SSM整合"><a href="#12-SSM整合" class="headerlink" title="12.SSM整合"></a>12.SSM整合</h1><p>步骤：</p>
<ol>
<li>准备工作<ol>
<li>原始方式整合<ul>
<li>创建数据表表</li>
</ul>
</li>
<li>创建Maven工程</li>
<li>带入Maven坐标<ul>
<li>spring、mybatis等坐标</li>
</ul>
</li>
<li>编写实体类<ul>
<li>Account 实体</li>
</ul>
</li>
<li>编写mapper接口（dao层）<ul>
<li>方法：save()、findAll()</li>
</ul>
</li>
<li>编写Service接口<ul>
<li>AccountService：save()、findAll();</li>
</ul>
</li>
<li>编写Service接口实现</li>
<li>编写Controller（web层）</li>
<li>编写添加页面</li>
<li>编写列表展示页面</li>
<li>编写相应的配置文件<ul>
<li>Spring配置文件：applicationContext.xml</li>
<li>SpringMVC配置文件：Spring-mvc.xml</li>
<li>MyBatis映射文件：AccountMapper.xml</li>
<li>MyBatis核心文件：sqlMapConfig.xml</li>
<li>数据库链接信息文件：jdbc.properties</li>
<li>Web.xml文件：web.xml</li>
<li>日志文件：log4j.xml</li>
</ul>
</li>
<li>测试添加账户</li>
<li>测试账户列表</li>
</ol>
</li>
</ol>
<p>2.Spring整合MyBatis </p>
<ol>
<li>整合思路</li>
<li>将SqlSessionFactory配置到Spring容器中</li>
<li>扫描Mapper，让Spring容器产生Mapper实现类</li>
<li>配置声明式事务控制</li>
<li>修改Service实现类代码</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://kongshier.github.io">十二-Y</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://kongshier.github.io/post/766433e0.html">https://kongshier.github.io/post/766433e0.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://kongshier.github.io" target="_blank">十二-Y</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SSM/">SSM</a></div><div class="post_share"><div class="social-share" data-image="http://picgo.kongshier.top/2767/cool.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/13cd4832.html"><img class="prev-cover" src="http://picgo.kongshier.top/2767/8.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Github使用技巧</div></div></a></div><div class="next-post pull-right"><a href="/post/c6e613d8.html"><img class="next-cover" src="http://picgo.kongshier.top/2767/meinv1.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">maven</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81NzA2Ni8zMzUzMA"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="http://picgo.kongshier.top/2767/QQ图片20220401082949.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">十二-Y</div><div class="author-info__description">努力会变得越来越好！</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/kongshier" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="http://picgo.kongshier.top/2767/qq.jpg" target="_blank" title="QQ"><i class="fa-brands fa-qq"></i></a><a class="social-icon" href="http://picgo.kongshier.top/2767/wechat.png" target="_blank" title="Wechat"><i class="fa-brands fa-weixin"></i></a><a class="social-icon" href="https://blog.csdn.net/qq_56098191" target="_blank" title="CSDN"><i class="fa-brands fa-intercom"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp文章有错误,麻烦请联系作者QQ或者微信,即使更改错误! 大佬的到来,我荣幸之极!</p> <div class="twopeople"><div class="container" style="height:200px;"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px;"></canvas></div><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js"></script><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js"></script><script id="rendered-js" src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center;}canvas{display:block;margin:0 auto;cursor:move;}</style></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Spring"><span class="toc-text">1.Spring</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E4%BC%98%E5%8A%BF%EF%BC%9A"><span class="toc-text">Spring优势：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-text">Spring体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SSM%E6%A1%86%E6%9E%B6"><span class="toc-text">SSM框架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9C%A8JavaWeb%E4%B8%AD%E7%9A%84%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-text">1.在JavaWeb中的三层架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9C%A8SSM%E4%B8%AD%E7%9A%84%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-text">2.在SSM中的三层架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%9C%A8SSM%E4%B8%AD%E5%8C%85%E7%9A%84%E4%BD%9C%E7%94%A8%EF%BC%9A"><span class="toc-text">3.在SSM中包的作用：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%9C%A8SSM%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">4.在SSM中的配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-SSM%E4%B8%AD%E5%8C%85%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">5.SSM中包之间的关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-SSM%E6%A1%86%E6%9E%B6%E4%B8%AD%E5%90%84%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">6.SSM框架中各框架的作用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">Spring程序开发步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1Spring%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">1.1Spring配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E6%A0%87%E7%AD%BE%E8%8C%83%E5%9B%B4%E9%85%8D%E7%BD%AE"><span class="toc-text">Bean标签范围配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%85%8D%E7%BD%AE"><span class="toc-text">Bean生命周期配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E5%AE%9E%E4%BE%8B%E5%8C%96%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95"><span class="toc-text">Bean实例化三种方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E6%A6%82%E5%BF%B5"><span class="toc-text">Bean依赖注入概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E4%BE%9D%E8%B5%96%E8%BE%93%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-text">Bean依赖输入方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E4%BE%9D%E8%B5%96%E8%BE%93%E5%85%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">Bean依赖输入的数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%88%E5%88%86%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%EF%BC%89"><span class="toc-text">引入其他配置文件（分模块开发）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Spring%E7%9A%84API"><span class="toc-text">1.2 Spring的API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1ApplicationContext%E7%9A%84%E7%BB%A7%E6%89%BF%E4%BD%93%E7%B3%BB"><span class="toc-text">1.2.1ApplicationContext的继承体系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-ApplicationContext%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-text">1.2.2 ApplicationContext的实现类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-getBean-%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8"><span class="toc-text">1.2.3 getBean()方法使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Spring%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-text">2.Spring配置数据源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E6%BA%90-%E8%BF%9E%E6%8E%A5%E6%B1%A0-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">2.数据源(连接池)的作用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1%E6%95%B0%E6%8D%AE%E6%BA%90%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">2.1数据源开发步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2Spring%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-text">2.2Spring配置数据源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-text">3.Spring注解开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%A7%8B%E6%B3%A8%E8%A7%A3"><span class="toc-text">原始注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E6%96%B0%E6%B3%A8%E8%A7%A3"><span class="toc-text">Spring新注解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Spring%E6%95%B4%E5%90%88Junit"><span class="toc-text">4.Spring整合Junit</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E4%B8%8EWeb%E7%8E%AF%E5%A2%83%E9%9B%86%E6%88%90"><span class="toc-text">Spring与Web环境集成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E6%8F%90%E4%BE%9B%E8%8E%B7%E5%8F%96%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9A%84%E5%B7%A5%E5%85%B7"><span class="toc-text">Spring提供获取上下文的工具</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-SpringMVC"><span class="toc-text">2.SpringMVC</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1MVC%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-%E2%88%9A"><span class="toc-text">1.1MVC开发步骤  √</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E8%BF%87%E7%A8%8B"><span class="toc-text">访问过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">执行流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-SpringMVC%E6%B3%A8%E8%A7%A3%E8%A7%A3%E6%9E%90"><span class="toc-text">2.SpringMVC注解解析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-3%E8%8E%B7%E5%BE%97%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-text">5.1.3获得数据类型参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-4%E8%8E%B7%E5%BE%97%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-text">5.1.4获得集合类型参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-text">5.2请求数据乱码问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A%E6%B3%A8%E8%A7%A3-requestParam"><span class="toc-text">5.3参数绑定注解@requestParam</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4%E8%8E%B7%E5%BE%97Restful%E9%A3%8E%E6%A0%BC%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-text">5.4获得Restful风格的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="toc-text">5.5自定义类型转换器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6%E8%8E%B7%E5%BE%97Servlet%E7%9B%B8%E5%85%B3API"><span class="toc-text">5.6获得Servlet相关API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7%E8%8E%B7%E5%BE%97%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-text">5.7获得请求头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">5.8文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-8-1%E5%8D%95%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%AD%A5%E9%AA%A4"><span class="toc-text">5.8.1单文件上传步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-8-2%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">5.8.2多文件上传</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Spring-jdbcTemplate%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">3.Spring jdbcTemplate基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1jdcbTemplate%E6%A6%82%E8%BF%B0"><span class="toc-text">3.1jdcbTemplate概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-jdbcTemplate%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">3.2 jdbcTemplate开发步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3Spring%E4%BA%A7%E7%94%9FjdbcTemplate%E5%AF%B9%E8%B1%A1"><span class="toc-text">3.3Spring产生jdbcTemplate对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-jdbcTemplate%E7%9A%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="toc-text">3.4 jdbcTemplate的常用操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring%E7%BB%83%E4%B9%A0"><span class="toc-text">Spring练习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-spring%E7%BB%83%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">1.spring练习环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E6%AD%A5%E9%AA%A4"><span class="toc-text">1.1步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%94%A8%E6%88%B7%E4%B8%8E%E8%A7%92%E8%89%B2%E5%88%86%E6%9E%90"><span class="toc-text">2.用户与角色分析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8"><span class="toc-text">2.1角色列表</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-SpringMCV%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text">4.SpringMCV拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1%E6%8B%A6%E6%88%AA%E5%99%A8%E4%BD%9C%E7%94%A8"><span class="toc-text">4.1拦截器作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2%E8%BF%87%E6%BB%A4%E5%99%A8%E5%92%8C%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">4.2过滤器和拦截器的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3%E6%8B%A6%E6%88%AA%E5%99%A8%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-text">4.3拦截器使用步骤</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-Spring%E7%9A%84AOP"><span class="toc-text">6.Spring的AOP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1AOP%E7%9A%84%E4%BD%9C%E7%94%A8%E5%92%8C%E4%BC%98%E5%8A%BF"><span class="toc-text">6.1AOP的作用和优势</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2AOP%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0"><span class="toc-text">6.2AOP的底层实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3AOP%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF"><span class="toc-text">6.3AOP动态代理技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4AOP%E6%A6%82%E5%BF%B5"><span class="toc-text">6.4AOP概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5AOP%E6%98%8E%E7%A1%AE%E4%BA%8B%E9%A1%B9"><span class="toc-text">6.5AOP明确事项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-1%E9%9C%80%E8%A6%81%E7%BC%96%E5%86%99%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-text">6.5.1需要编写的内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-2AOP%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-text">6.5.2AOP技术实现的内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-3AOP%E5%BA%95%E5%B1%82%E4%BD%BF%E7%94%A8%E5%93%AA%E7%A7%8D%E7%9A%84%E4%BB%A3%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-text">6.5.3AOP底层使用哪种的代理方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-text">6.6知识要点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-7%E5%9F%BA%E4%BA%8Exml%E7%9A%84AOP%E5%BC%80%E5%8F%91"><span class="toc-text">6.7基于xml的AOP开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-1%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">6.7.1快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="toc-text">实现的代码：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E6%A0%BC%E5%BC%8F%EF%BC%9A"><span class="toc-text">切点表达式的格式：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E6%8A%BD%E5%8F%96%E3%80%81"><span class="toc-text">切点表达式的抽取、</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-3XMl%E9%85%8D%E7%BD%AEAOP%E8%AF%A6%E8%A7%A3"><span class="toc-text">6.7.3XMl配置AOP详解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E7%9F%A5%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">通知的类型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-8AOP%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-text">6.8AOP的注解开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-1%E6%B3%A8%E8%A7%A3%E9%80%9A%E7%9F%A5%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">6.8.1注解通知的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-2%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E6%8A%BD%E5%8F%96"><span class="toc-text">6.8.2切点表达式的抽取</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-Spring%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6"><span class="toc-text">7.Spring的事务控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E7%BC%96%E7%A8%8B%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-text">7.1 编程式事务控制（了解）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2%E5%9F%BA%E4%BA%8Exml%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6"><span class="toc-text">7.2基于xml的声明式事务控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%EF%BC%9A"><span class="toc-text">作用：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-1%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-text">7.2.1声明式事务控制的实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6"><span class="toc-text">7.3注解的声明式事务控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-1%E6%B3%A8%E8%A7%A3%E8%A7%A3%E6%9E%90"><span class="toc-text">7.3.1注解解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-2%E6%B3%A8%E8%A7%A3%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-text">7.3.2注解知识要点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-MyBatis"><span class="toc-text">8.MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1%E6%A6%82%E5%BF%B5"><span class="toc-text">8.1概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2MyBatis-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">8.2MyBatis 快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-text">代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3Mybatis-xml%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E4%B8%BA%E6%96%87%E4%BB%B6"><span class="toc-text">8.3Mybatis.xml核心配置为文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-1MyBatis%E5%B8%B8%E7%94%A8%E7%9A%84%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90"><span class="toc-text">8.3.1MyBatis常用的配置解析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-environments%E6%A0%87%E7%AD%BE"><span class="toc-text">1.environments标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-mappers%E6%A0%87%E7%AD%BE"><span class="toc-text">2.mappers标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Properties%E6%A0%87%E7%AD%BE"><span class="toc-text">3.Properties标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-typeAliases%E6%A0%87%E7%AD%BE"><span class="toc-text">4.typeAliases标签</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4MyBatis%E7%9A%84%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E6%A6%82%E8%BF%B0"><span class="toc-text">8.4MyBatis的映射文件概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-5MyBatis%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-text">8.5MyBatis的增删改查</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-1%E5%A2%9E"><span class="toc-text">8.5.1增</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%97%B6%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">插入时要注意的问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-2%E6%94%B9"><span class="toc-text">8.5.2改</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-text">注意</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-2%E5%88%A0"><span class="toc-text">8.5.2删</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F-1"><span class="toc-text">注意</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-3%E6%9F%A5"><span class="toc-text">8.5.3查</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-6MyBatis%E7%9A%84API"><span class="toc-text">8.6MyBatis的API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-1SqlSession%E5%B7%A5%E5%8E%82%E6%9E%84%E5%BB%BA%E5%99%A8SqlSessionFactoryBuilder"><span class="toc-text">8.6.1SqlSession工厂构建器SqlSessionFactoryBuilder</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-2SqlSession%E4%BC%9A%E8%AF%9D%E5%AF%B9%E8%B1%A1-%E2%9C%94"><span class="toc-text">8.6.2SqlSession会话对象 ✔</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-7Mybatis%E7%9A%84Dao%E5%B1%82%E5%AE%9E%E7%8E%B0"><span class="toc-text">8.7Mybatis的Dao层实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-1%E4%BC%A0%E7%BB%9F%E7%9A%84%E5%BC%80%E5%8F%91%E6%96%B9%E5%BC%8F"><span class="toc-text">8.7.1传统的开发方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-MyBatis%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E6%B7%B1%E5%85%A5"><span class="toc-text">9.MyBatis映射文件深入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1%E5%8A%A8%E6%80%81sql%E8%AF%AD%E5%8F%A5"><span class="toc-text">9.1动态sql语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQl%E7%8E%AF%E5%A2%83"><span class="toc-text">SQl环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2%E5%8A%A8%E6%80%81sql%E8%AF%AD%E5%8F%A5-if"><span class="toc-text">9.2动态sql语句  if</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E5%8A%A8%E6%80%81sql%E8%AF%AD%E5%8F%A5-foreach"><span class="toc-text">9.3 动态sql语句  foreach</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4typeHandlers%E6%A0%87%E7%AD%BE"><span class="toc-text">9.4typeHandlers标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5Plugins%E6%A0%87%E7%AD%BE"><span class="toc-text">9.5Plugins标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93%EF%BC%9A"><span class="toc-text">小结：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE"><span class="toc-text">标签</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-MyBatis%E7%9A%84%E5%A4%9A%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-text">10.MyBatis的多表操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-%E4%B8%80%E5%AF%B9%E4%B8%80%E6%9F%A5%E8%AF%A2"><span class="toc-text">10.1 一对一查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">环境搭建</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2"><span class="toc-text">10.2一对多查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2"><span class="toc-text">10.3多对多查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4MyBatis%E5%A4%9A%E8%A1%A8%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93"><span class="toc-text">10.4MyBatis多表配置总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-MyBatis%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-text">11.MyBatis的注解开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1MyBatis%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%93%8D%E4%BD%9C"><span class="toc-text">11.1MyBatis的增删改查操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2MyBatis%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0%E5%A4%8D%E6%9D%82%E6%98%A0%E5%B0%84%E5%BC%80%E5%8F%91"><span class="toc-text">11.2MyBatis的注解实现复杂映射开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3MyBtais%E7%9A%84%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-text">11.3MyBtais的一对多的查询注解开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4MyBatis%E7%9A%84%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2"><span class="toc-text">11.4MyBatis的多对多查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12-SSM%E6%95%B4%E5%90%88"><span class="toc-text">12.SSM整合</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/d6df53a3.html" title="CSS规范"><img src="http://picgo.kongshier.top/2767/newxinlan2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSS规范"/></a><div class="content"><a class="title" href="/post/d6df53a3.html" title="CSS规范">CSS规范</a><time datetime="2022-11-05T03:10:00.000Z" title="发表于 2022-11-05 11:10:00">2022-11-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/599b70c0.html" title="CSS基础"><img src="http://picgo.kongshier.top/2767/yewangirl.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSS基础"/></a><div class="content"><a class="title" href="/post/599b70c0.html" title="CSS基础">CSS基础</a><time datetime="2022-11-05T03:10:00.000Z" title="发表于 2022-11-05 11:10:00">2022-11-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/5d7b6fc6.html" title="Python学习路线"><img src="http://picgo.kongshier.top/2767/3.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python学习路线"/></a><div class="content"><a class="title" href="/post/5d7b6fc6.html" title="Python学习路线">Python学习路线</a><time datetime="2022-08-28T03:15:00.000Z" title="发表于 2022-08-28 11:15:00">2022-08-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/e5cf9037.html" title="前端学习路线"><img src="http://picgo.kongshier.top/2767/wallhaven.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端学习路线"/></a><div class="content"><a class="title" href="/post/e5cf9037.html" title="前端学习路线">前端学习路线</a><time datetime="2022-08-28T03:10:00.000Z" title="发表于 2022-08-28 11:10:00">2022-08-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/1dcaa99.html" title="大厂开发流程"><img src="http://picgo.kongshier.top/2767/3.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="大厂开发流程"/></a><div class="content"><a class="title" href="/post/1dcaa99.html" title="大厂开发流程">大厂开发流程</a><time datetime="2022-08-28T03:05:00.000Z" title="发表于 2022-08-28 11:05:00">2022-08-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By 十二-Y</div><div class="footer_custom_text">❤️❤️❤️❤️❤️<div>愿你不负初心，越来越好！</div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Livere' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><script async src="https://npm.elemecdn.com/tzy-blog/lib/js/other/sakura.js"></script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script><script async src="/js/weather.js"></script><script src="https://cdn.jsdelivr.net/gh/weilain/cdn-photo/js/jquery.min.js"></script><script src="/js/sun_moon.js" async></script><div class="aplayer no-destroy" data-id="8603873081" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="false" muted></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://npm.elemecdn.com/hexo-butterfly-clock/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_injector_config();
  }
  </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax src="https://npm.elemecdn.com/hexo-butterfly-clock/lib/clock.min.js"></script><!-- hexo injector body_end end --></body></html>